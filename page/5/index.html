<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"reoger.tk","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="reoger">
<meta property="og:type" content="website">
<meta property="og:title" content="reoger的记录">
<meta property="og:url" content="http://reoger.tk/page/5/index.html">
<meta property="og:site_name" content="reoger的记录">
<meta property="og:description" content="reoger">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="reoger">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://reoger.tk/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>reoger的记录</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">reoger的记录</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">--以后的你会感激现在那么努力的自己</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2018/01/12/gradle%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/12/gradle%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">gradle基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2018-01-12 14:50:13 / 修改时间：21:19:18" itemprop="dateCreated datePublished" datetime="2018-01-12T14:50:13+08:00">2018-01-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%9E%E4%B9%A0%E6%97%A5%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">实习日记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em>Gradle 是一个能通过插件形式自定义构建逻辑的优秀构建工具。</em></p>
<p>以下的一些特性让我们选择了 Gradle：</p>
<ul>
<li>使用领域专用语言（DSL）来描述和控制构建逻辑</li>
<li>构建文件基于 Groovy，并允许通过 DSL 来声明元素、使用代码操作 DSL 元素这样的混<br>合方式来自定义构建逻辑</li>
<li>内置了 Maven 和 Ivy 来进行依赖管理</li>
<li>相当灵活。允许使用最好的实现，但是不会强制实现的形式</li>
<li>插件可以提供它们的 DSL 和 API 来定义构建文件</li>
<li>优秀的 API 工具与 IDE 集成</li>
</ul>
<p>这里主要记录几个比较常用，重要的点。</p>
<h1 id="android-Task"><a href="#android-Task" class="headerlink" title="android Task"></a>android Task</h1><ul>
<li><code>assemble</code> 组合项目所有输出，他可以细分成<code>assemableDebug</code>和<code>assembleRelease</code>。</li>
<li><code>check</code> 执行所有检查，他拥有 <code>lint</code> 依赖</li>
<li><code>connectedCheck</code> 在一个连接的设备或者模拟器上执行检查，他们可以在所有连接的设备上并行执行检查,他拥有<code>connectedAndroidTest</code>依赖</li>
<li><code>deviceCheck</code> 通过APIs连接远程设备来执行检查，主要用于CI（持续集成）服务上。</li>
<li><code>build</code> 执行<code>assemle</code>和<code>check</code>的所有工作</li>
<li><code>clean</code> 清空项目的输出。</li>
<li><code>installDebug</code> 安装测试版的apk</li>
<li><code>installRelease</code> 安装发布版的apk</li>
<li><code>uninstall</code> 卸载安装，他包含三个动作<code>uninstallDebug</code>卸载测试版本， <code>uninstallRelease</code>卸载发行版本和<code>uninstallDebugAndroidTest</code>卸载android测试。</li>
</ul>
<h1 id="gradle-添加依赖"><a href="#gradle-添加依赖" class="headerlink" title="gradle 添加依赖"></a>gradle 添加依赖</h1><p>gradle的依赖主要分成本地包依赖和远程包依赖。<br>依赖的关键字主要包括：</p>
<ol>
<li><code>compile</code> 源代码(src/main/java)编译时的依赖</li>
<li><code>runtime</code> 源代码(src/main/java)执行时的依赖</li>
<li><code>testCompile</code> 测试代码(src/main/test)编译时的依赖</li>
<li><code>testRuntime</code> 测试代码(src/main/test)执行时的依赖</li>
<li><code>archives</code> 项目打包时的依赖</li>
<li><code>provided</code> 只编译，并不将jar包导入到apk中。</li>
</ol>
<p>依赖格式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile group: &#39;org.hibernate&#39;, name: &#39;hibernate-core&#39;, version: &#39;3.6.7.Final&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中的group表示组织，name表示要依赖的库，vesion表示版本。<br>我们可以简写成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile &#39;org.hibernate:hibernate-core:3.6.7.Final&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，不单只有对jar包的依赖，还可以有对文件的依赖，对项目的依赖，他们的写法依次如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;]) &#x2F;&#x2F;将本地lib目录下所有的jar包进行依赖</span><br><span class="line">    compile files(&#39;libs&#x2F;picasso-2.4.0.jar&#39;)</span><br><span class="line">    compile project(&#39;:libraries:lib1&#39;)  &#x2F;&#x2F;对项目lib1添加依赖</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>##本地依赖<br>上面讲到的就是本地依赖的方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])</span><br><span class="line">&#125;</span><br><span class="line">android &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="外部依赖"><a href="#外部依赖" class="headerlink" title="外部依赖"></a>外部依赖</h2><p>首先需要添加远程仓库，android中至少添加一个远程仓库，例如使用开放的maven仓库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">repositories&#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后，就对添加具体依赖。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies&#123;</span><br><span class="line">    compile group: &#39;commons-collections&#39;,name: &#39;commons-collections&#39;, version: &#39;3.2&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="混淆"><a href="#混淆" class="headerlink" title="混淆"></a>混淆</h1><p>启动混淆非常简单，只需要在<code>build.gradle</code>中启动即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">        minifyEnabled true</span><br><span class="line">        proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中的<code>minfyEnabled</code>默认是false，即不混淆，因为启动混淆编译速度会比较慢。<br>与混淆相关的还有一个<code>shrinkResources</code>属性，可以通过将其设置为<code>true</code>，设置资不打包没用的资源。</p>
<p>混淆通用规则：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#指定压缩级别</span><br><span class="line">-optimizationpasses 5</span><br><span class="line"></span><br><span class="line">#不跳过非公共的库的类成员</span><br><span class="line">-dontskipnonpubliclibraryclassmembers</span><br><span class="line"></span><br><span class="line">#混淆时采用的算法</span><br><span class="line">-optimizations !code&#x2F;simplification&#x2F;arithmetic,!field&#x2F;*,!class&#x2F;merging&#x2F;*</span><br><span class="line"></span><br><span class="line">#把混淆类中的方法名也混淆了</span><br><span class="line">-useuniqueclassmembernames</span><br><span class="line"></span><br><span class="line">#优化时允许访问并修改有修饰符的类和类的成员 </span><br><span class="line">-allowaccessmodification</span><br><span class="line"></span><br><span class="line">#将文件来源重命名为“SourceFile”字符串</span><br><span class="line">-renamesourcefileattribute SourceFile</span><br><span class="line">#保留行号</span><br><span class="line">-keepattributes SourceFile,LineNumberTable</span><br><span class="line"></span><br><span class="line">#保持所有实现 Serializable 接口的类成员</span><br><span class="line">-keepclassmembers class * implements java.io.Serializable &#123;</span><br><span class="line">    static final long serialVersionUID;</span><br><span class="line">    private static final java.io.ObjectStreamField[] serialPersistentFields;</span><br><span class="line">    private void writeObject(java.io.ObjectOutputStream);</span><br><span class="line">    private void readObject(java.io.ObjectInputStream);</span><br><span class="line">    java.lang.Object writeReplace();</span><br><span class="line">    java.lang.Object readResolve();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#Fragment不需要在AndroidManifest.xml中注册，需要额外保护下</span><br><span class="line">-keep public class * extends android.support.v4.app.Fragment</span><br><span class="line">-keep public class * extends android.app.Fragment</span><br><span class="line"></span><br><span class="line"># 保持测试相关的代码</span><br><span class="line">-dontnote junit.framework.**</span><br><span class="line">-dontnote junit.runner.**</span><br><span class="line">-dontwarn android.test.**</span><br><span class="line">-dontwarn android.support.test.**</span><br><span class="line">-dontwarn org.junit.**</span><br></pre></td></tr></table></figure>

<p>补充的混淆规则：</p>
<ol>
<li><p>第三方库混淆规则。这个比较常见，直接接入官方说明文档。</p>
</li>
<li><p>model实体类，典型在转化json的时候，必须保证model不被混淆，因此需加入–keep public class</p>
</li>
<li><p>JNI中调用的类以及方法不可被混淆</p>
</li>
<li><p>WebView中JavaScript调用的接口不混淆</p>
</li>
<li><p>AndroidMainfest、四大组件以及Application的子类不混淆</p>
</li>
<li><p>Parcelable的子类和Creator静态成员变量不混淆，否则会产生Android.os.BadParcelableException异常</p>
</li>
<li><p>Layout布局使用的View构造函数、android:onClick等。</p>
</li>
</ol>
<h1 id="apk打包流程"><a href="#apk打包流程" class="headerlink" title="apk打包流程"></a>apk打包流程</h1><p><img src="https://upload-images.jianshu.io/upload_images/1441907-8a2c24bbb71c2cbf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/536" alt="打包流程"></p>
<ol>
<li>aapt打包res资源文件，生成R文件。</li>
<li>处理aidl,生成java文件</li>
<li>编译java 生成class文件</li>
<li>通过dex命令，将class文件生成dex文件</li>
<li>apkbuilder阶段，将资源、dex、so合并成apk</li>
<li>对apk进行签名</li>
<li>zipalign阶段,将签名后的apk进行对齐</li>
</ol>
<h1 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h1><ul>
<li><p><a href="https://www.gitbook.com/book/chaosleong/gradle-for-android" target="_blank" rel="noopener">Gradle Android Plugin 中文手册</a></p>
</li>
<li><p><a href="https://dongchuan.gitbooks.io/gradle-user-guide-/" target="_blank" rel="noopener">Gradle User Guide 中文版</a></p>
</li>
<li><p><a href="https://developer.android.com/studio/releases/gradle-plugin.html" target="_blank" rel="noopener">Android Plugin for Gradle Release Notes</a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/7c288a17cda8" target="_blank" rel="noopener">Android 打包过程</a></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2018/01/11/sdk-%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/11/sdk-%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">sdk 目录介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-01-11 21:19:46" itemprop="dateCreated datePublished" datetime="2018-01-11T21:19:46+08:00">2018-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-01-18 10:25:10" itemprop="dateModified" datetime="2018-01-18T10:25:10+08:00">2018-01-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%9E%E4%B9%A0%E6%97%A5%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">实习日记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="sdk-目录下各目录详解"><a href="#sdk-目录下各目录详解" class="headerlink" title="sdk 目录下各目录详解"></a>sdk 目录下各目录详解</h1><p>sdk目录下的目录如下：<br><img src="http://upload-images.jianshu.io/upload_images/2178834-947c10d5de3b8a99.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="dir.png"></p>
<p>下面针对一些工具进行介绍：</p>
<ol>
<li>add-ons<br>这里保存着附加库，第三方公司为Android平台开发的附加功能。例如googleMaps</li>
<li>build tools（重要）<br>这里保存着一些Android开发常用的工具，例如adb、aidl等等。下面是我的tools目录下的工具包。<br><img src="http://upload-images.jianshu.io/upload_images/2178834-56578752af0e735e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="platforms.png"></li>
</ol>
<ul>
<li>android<br>这个其实就是Android SDK Manager，用于管理SDK的下载、更新和删除。</li>
<li>ddms<br>这个工具集成了Dalvik（为Android 平台定制的虚拟机（VM）），能够让你在模拟器或者设备上管理进程并协助调试。你可以使用它杀死进程，选择某个特定的进程来调试，产生跟踪数据，观察堆（heap）和线程信息，截取模拟器或设备的屏幕画面，还有更多的功能。</li>
<li>draw9patch<br>该工具允许你使用所见即所得（WYSIWYG）的编辑器轻松地创建NinePatch图形。它也可以预览经过拉伸的图像，高亮显示内容区域。</li>
<li>hierarchyviewer<br>Hierarchyview和UiAutomatorviewer作用类似，都是用于查看当前界面控件，但Hierarchyviewer能显示的属性更为全面(设备需要root，调用的API权限比UiAutomator更高)</li>
<li>jobb<br>这个工具可以用来加密、解密apk</li>
<li>lint<br>是代码扫描分析工具，它可以帮助我们发现代码结构/质量问题，同时提供一些解决方案，而且这个过程不需要我们手写测试用例。</li>
<li>mksdcard<br>帮助你创建磁盘映像（disk image），你可以在模拟器环境下使用磁盘映像来模拟外部存储卡（例如SD 卡）。</li>
<li>monitor<br>Monitor工具具有强大的监控功能，他提供良好界面和众多监控功能，包括devicse监控、update Heap、</li>
<li>monkeyrunner<br>的压力测试应用，模拟用户随机按键。</li>
<li>traceview<br>这个工具可以将你的Android 应用程序产生的跟踪日志（trace log）转换为图形化的分析视图。</li>
<li>uiautomatorviewer<br>用于进行UI测试。</li>
</ul>
<ol start="3">
<li>docs<br>这里面是Android SDK API参考文档。</li>
<li>emulator<br>这里存放的是一些安卓模拟器</li>
<li>extras<br>扩展开发包，在此文件夹下保存着额外的usb驱动、intel硬件加速。</li>
<li>patcher<br>增量更新，用于更新记录。</li>
<li>platforms<br>是每个平台SDK真正的文件，存放不同版本的Android系统。里面会根据APILevel划分的SDK版本，本人下载的是Android 23，进入之后的目录如下：<br><img src="http://upload-images.jianshu.io/upload_images/2178834-c413d794f93d0106.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="platforms-tools.png"><br>针对上面的目录简单介绍如下；</li>
</ol>
<ul>
<li>data<br>保存着一些系统资源。</li>
<li>optional<br>存放一些可选择的支持库，譬如http client就可以依赖本目录下的<code>org.apache.http.legacy</code>jar包。</li>
<li>skins<br>存这Android模拟器的皮肤。</li>
<li>templates<br>工程的默认模板。</li>
</ul>
<ol start="8">
<li>platforms-tools（重要）<br>版本通用的工具，比如adb、aidl、dexdump等等。目录结果如下：<br><img src="http://upload-images.jianshu.io/upload_images/2178834-362d048fe17c7107.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tools.png"></li>
</ol>
<ul>
<li>adb<br>Android Debug Bridge，Android调试桥接器，简称ADB，是用于管理模拟器或真机状态的万能工具，通俗一点讲adb就是pc和移动设备通信的桥梁，它采用了c/s模型，包括三个部分：客户端部分、服务端部分和守护进程部分。</li>
<li>dmtracedump<br>是将整个调用过程和时间分析结合，以函数调用图的形式表现出来。</li>
<li>etc1tool<br>  etc1tool是一个命令行工具，可以将PNG图像压缩为etc1标准，并且可以进行解压缩。</li>
<li>fastboot<br>  Fastboot是Android快速升级的一种方法，Fastboot的协议fastboot_protocol.txt在源码目录./bootable/bootloader/legacy下可以找到。<br>  Fastboot客户端是作为Android系统编译的一部分，编译后位于./out/host/linux-x86/bin/fastboot目录下。<br>  Fastboot命令实例：<code>sudo fastboot flash kernel path-to-kernel/uImage</code><br>  烧写rootfs类似：<code>sudo fastboot flash system path-to-system/system.img</code></li>
<li>hprof-conv<br>hprof-conv工具可以将Android SDK工具生成的HPROF文件生成一个标准的格式,主要用于性能测试。</li>
<li>make_f2fs<br>转化成f2fs文件格式的文件。</li>
<li>mke2fs<br>mke2fs命令被用于创建磁盘分区上的“etc2/etc3”文件系统。</li>
<li>sqlite3<br>在adb命令模式下，查看数据库的信息。</li>
</ul>
<ol start="9">
<li>skins<br>Android模拟器的皮肤。</li>
<li>sources<br>各版本的sdk源码。</li>
<li>system-images<br>模拟器映像文件。从android-14开始将模拟器映像文件整理在这里(原来放在platforms下)</li>
<li>tools<br>各个版本自带工具，包含重要的工具DDMS</li>
<li>AVD Manager<br>Android手机模拟配置工具，用于配置模拟器。</li>
<li>SDK maager<br>SDK管理器，用于SDK的更新、下载、删除。</li>
</ol>
<p>参考链接：</p>
<ul>
<li><a href="https://developer.android.com/studio/command-line/jobb.html" target="_blank" rel="noopener">官方参考文章</a></li>
<li><a href="http://blog.csdn.net/apple_hsp/article/details/51459930" target="_blank" rel="noopener">Android系统platform-tools包详解</a></li>
<li><a href="http://blog.csdn.net/itluochen/article/details/52688935" target="_blank" rel="noopener">Android SDK目录结构</a></li>
<li><a href="https://www.jianshu.com/p/3f8828b4a05a" target="_blank" rel="noopener">Android SDK中的强大工具-Monitor</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/11/28/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A1%AB%E5%9D%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/28/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A1%AB%E5%9D%91/" class="post-title-link" itemprop="url">mysql数据库填坑</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2017-11-28 19:08:25 / 修改时间：21:17:48" itemprop="dateCreated datePublished" datetime="2017-11-28T19:08:25+08:00">2017-11-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">后端学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>mysql是一个比较轻量级的数据库，在日常的开发过程中经常会用到，这里记录一下我在用mysql数据库时遇到的坑。</p>
</blockquote>
<h1 id="坑一，check约束无效。"><a href="#坑一，check约束无效。" class="headerlink" title="坑一，check约束无效。"></a>坑一，check约束无效。</h1><p>在使用mysql数据库的时候，我们经常需要对数据进行约束，例如，我们有一个这样的表，</p>
<table>
<thead>
<tr>
<th>user_id</th>
<th>user_name</th>
<th>user_sex</th>
<th>user_age</th>
<th>user_socer</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>varchar(10)</td>
<td>varchar(1)</td>
<td>int</td>
<td>int</td>
</tr>
</tbody></table>
<p>对应的mysql常见语句可以为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;usr&#96; (</span><br><span class="line">  &#96;user_id&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;user_name&#96; varchar(10) NOT NULL,</span><br><span class="line">  &#96;user_sex&#96; varchar(1) NOT NULL,</span><br><span class="line">  &#96;user_age&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;user_socer&#96; int(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;user_id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<p>注意，这里指定的主键为<code>use_id</code>,且指定的方式入上述语句。</p>
<p>这个时候，如果我们想对其中的项进行约束，例如<code>user_sex</code>，我们只希望出现<code>f</code>代表女生,和<code>m</code>代表男生，其他的值都是无效的，这个时候用<code>check</code>语句是没有效果的，这个时候我们可以通过<code>enum</code>或者<code>set</code>类型来对其数据进行约束，具体实现为：<br>方式一：<br>创建时指定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;usr&#96; (</span><br><span class="line">  &#96;user_id&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;user_name&#96; varchar(10) NOT NULL,</span><br><span class="line">  &#96;user_sex&#96; SET(&#39;f&#39;,&#39;m&#39;) NOT NULL,</span><br><span class="line">  &#96;user_age&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;user_socer&#96; int(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;user_id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<p>或者用enum来实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;usr&#96; (</span><br><span class="line">  &#96;user_id&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;user_name&#96; varchar(10) NOT NULL,</span><br><span class="line">  &#96;user_sex&#96; enum(&#39;f&#39;,&#39;m&#39;) NOT NULL,</span><br><span class="line">  &#96;user_age&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;user_socer&#96; int(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;user_id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<p>方式二：<br>在已经创建表的基础上，修改表的数据类型:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE usr MODIFY COLUMN user_sex SET(&#39;f&#39;,&#39;m&#39;);</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE usr MODIFY COLUMN user_sex enum(&#39;f&#39;,&#39;m&#39;);</span><br></pre></td></tr></table></figure>

<p>至于添加其他的约束条件可以参考<a href="http://blog.csdn.net/peng_666666/article/details/54813098" target="_blank" rel="noopener">这里</a>.</p>
<h1 id="坑二，无法建立外键约束"><a href="#坑二，无法建立外键约束" class="headerlink" title="坑二，无法建立外键约束"></a>坑二，无法建立外键约束</h1><p>如果公共关键字在一个关系中是主关键字，那么这个公共关键字被称为另一个关系的外键。由此可见，外键表示了两个关系之间的相关联系。以另一个关系的外键作主关键字的表被称为主表，具有此外键的表被称为主表的从表。</p>
<p>先记录一下完整的外键建立流程吧，假设我们已经建立了上面的<code>usr</code>数据库，我们还需要建立一个<code>action</code>数据库来记录用户的行为，其各内容如表格所示：<br>|action_id|action_user_id|action_time|action_conten|<br>|—-|—|—|–|<br>|int|int|time|varchar(50)|</p>
<p>我们可以使用如下的sql语句进行创建：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;action&#96; (</span><br><span class="line">&#96;action_id&#96;  int NOT NULL ,</span><br><span class="line">&#96;action_user_id&#96;  int NOT NULL ,</span><br><span class="line">&#96;action_time&#96;  time NOT NULL ,</span><br><span class="line">&#96;action_content&#96;  varchar(50) NOT NULL ,</span><br><span class="line">PRIMARY KEY (&#96;action_id&#96;)</span><br><span class="line">)ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<p>创建完成之后，我们需要在<code>action</code>和<code>usr</code>表中创建索引。本例中，我们将设置<code>usr</code>表中的<code>usr_id</code>为<code>action</code>表中<code>action_usr_id</code>的外键，下面介绍三种方式来创建外键。</p>
<p>首先介绍建立外键的几个必要条件：</p>
<ul>
<li>两个表必须是InnoDB表类型。</li>
<li>使用在外键关系的域必须为索引型(Index)。</li>
<li>使用在外键关系的域必须与数据类型相同。</li>
<li>外键的不能是主键</li>
</ul>
<p>稍微对上面的必要条件进行一个简单的说明，</p>
<h2 id="方式一、通过sql语句"><a href="#方式一、通过sql语句" class="headerlink" title="方式一、通过sql语句"></a>方式一、通过sql语句</h2><p>1.创建索引<br>首先为<code>user</code>表中的<code>user_id</code>创建索引：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE usr ADD INDEX idx_user (user_id);</span><br></pre></td></tr></table></figure>
<p>这里的idx_user是创建的索引的名字，并不重要，我们可以随便去，并且我们后面也不会用到它。我们只需要创建了他就好了。<br>下面我们来为<code>action</code>表中的<code>action_user_id</code>创建索引：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE action ADD INDEX idx_action (action_user_id);</span><br></pre></td></tr></table></figure>

<p>2.创建外键</p>
<p>再创建了索引之后，我们就可以创建外键了，sql语句如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE &#96;action&#96; ADD FOREIGN KEY (&#96;action_user_id&#96;) </span><br><span class="line">REFERENCES &#96;usr&#96; (&#96;user_id&#96;) </span><br><span class="line">ON DELETE RESTRICT ON UPDATE RESTRICT;</span><br></pre></td></tr></table></figure>

<p>这里对上面的sql语句进行一个简单的说明，第一行指定了我们的外键为<code>action</code>表中的<code>action_user_id</code>；<br>第二行指定了从键为<code>usr</code>表中的<code>user_id</code>；至于第三行代码，主要对外键的属性进行设置，简单介绍一下四个属性的作用：</p>
<ul>
<li>RESTRICT ：父表删除(更新)且外键对应子表记录存在时，则不允许删除(更新)。</li>
<li>CASCADE ：父表删除(更新)时，外键对应子表记录同时删除(更新)。</li>
<li>SET NULL ：父表删除(更新)时，外键对应子表记录同时置为NULL.(必须允许为NULL）</li>
<li>NO ACTION：父表删除(更新)且外键对应子表记录存在时，则不允许删除(更新)。</li>
</ul>
<p>到此，我们的外键就建立完毕了，如果一切比较顺利的话还是比较简单的。<br>上面是通过sql语句直接创建外键，不是特别直观，下面通过介绍两个工具的使用来介绍如何创建外键。</p>
<h2 id="方式二、通过phpMyAdmin创建"><a href="#方式二、通过phpMyAdmin创建" class="headerlink" title="方式二、通过phpMyAdmin创建"></a>方式二、通过phpMyAdmin创建</h2><p>1.创建索引<br><img src="http://ovec6nnof.bkt.clouddn.com/phpMyAdmin%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95.png" alt="创建索引"><br>相同的，我们也需要为<code>action</code>表中的<code>action_user_id</code>也创建一个索引。</p>
<p>2.创建外键</p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/phpMyAdmin%E5%88%9B%E5%BB%BA%E5%A4%96%E9%94%AE.png" alt="创建外键"></p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/phpMyAdmin%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E5%AE%8C%E6%88%90.png" alt="创建外键成功"></p>
<h2 id="方式三、通过navicat创建"><a href="#方式三、通过navicat创建" class="headerlink" title="方式三、通过navicat创建"></a>方式三、通过navicat创建</h2><ol>
<li>创建索引</li>
</ol>
<p>这一步可以省略，因为通过navicat创建外键时会自动创建索引，这一步也可以手动操作。</p>
<p>选择： 设计表 -&gt; 索引 -&gt; 填写相应参数 -&gt; 保存。</p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/navicat%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95.jpg" alt="创建索引"><br>2. 创建外键<br>创建外键也很简单，只需要选择：<br>设计表 -&gt; 外键 -&gt; 填写相应参数 -&gt; 点击保存。即可。</p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/nativcat%E5%88%9B%E5%BB%BA%E5%A4%96%E9%94%AE.png" alt="创建外键"></p>
<p>坑：外键和从键的类型和长度必须一致，甚至于属性也需要一致，否则会创建失败，创建失败的的代号为：1215 。<br>提示为：1215 Cannot add the foreign key constraint。<br>这个时候就仔细查看一下主从建之间是不是存在某些差别。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="http://blog.csdn.net/xrt95050/article/details/5556411" target="_blank" rel="noopener">数据库的几个概念：主键，外键，索引，唯一索引</a></li>
<li><a href="https://www.cnblogs.com/geaozhang/p/6786105.html" target="_blank" rel="noopener">MySQL常见的建表选项及约束</a></li>
<li><a href="http://blog.csdn.net/peng_666666/article/details/54813098" target="_blank" rel="noopener">MySQL数据库——修改约束基本操作</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/11/06/centos%E4%B8%8B%E5%AE%89%E8%A3%85elasticSeach/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/06/centos%E4%B8%8B%E5%AE%89%E8%A3%85elasticSeach/" class="post-title-link" itemprop="url">centos 6.5下安装ElasticSearch5.6.1问题记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-11-06 22:44:55" itemprop="dateCreated datePublished" datetime="2017-11-06T22:44:55+08:00">2017-11-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-05-03 11:11:36" itemprop="dateModified" datetime="2018-05-03T11:11:36+08:00">2018-05-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">后端学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>之前在window 10上安装elasticSearch是很简单的，但是真正要linux系统上安装时，还是出现了许多的问题，下面就是我记录的我遇到的一些问题。</p>
</blockquote>
<h1 id="整体流程"><a href="#整体流程" class="headerlink" title="整体流程"></a>整体流程</h1><ol>
<li>下载elasticSearch5.6.1的压缩包，然后解压到指定文件夹下，参考解压命令：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf elasticsearch5.6.1.tar</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>为其创建新用户（root用户无法启动），参考命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root]# adduser elsearch</span><br><span class="line">[root]# passwd elsearch</span><br><span class="line">[root]# chown -R elsearch:elsearch elasticSearch5.6.1&#x2F;</span><br></pre></td></tr></table></figure></li>
<li><p>切换到指定用户，并运行.参考命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root]# su elsearch</span><br><span class="line">[elsearch]$ cd elasticSearch5.6.1&#x2F;bin</span><br><span class="line">[elsearch]$ .&#x2F;elasticSearch</span><br><span class="line"></span><br><span class="line">在正常启动之后，应该就能通过访问http:&#x2F;&#x2F;localhost:9200来使用elasticsearch了</span><br></pre></td></tr></table></figure></li>
<li><p>配置ip地址访问。<br>这里和windows下修改的地方一样，但是不一样的是，这里出现的问题会很多,要修改的内容参考如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vim  elasticsearch-5.6.1&#x2F;config&#x2F;elasticsearch.yml</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">cluster.name: EsMaster  # 集群master的名称</span><br><span class="line"></span><br><span class="line">node.name: master   # 当前结点的名称</span><br><span class="line">node.master: true  # 设置为master节点</span><br><span class="line"></span><br><span class="line">bootstrap.memory_lock: false  # 关闭内存锁定</span><br><span class="line">bootstrap.system_call_filter: false</span><br><span class="line"></span><br><span class="line">network.host: 127.0.0.1 # 这里修改成你要绑定的id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http.cors.enabled: true     # 设置跨域访问，为后面的head-master的配置</span><br><span class="line">http.cors.allow-origin: &quot;*&quot;</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">保存，重启elasticsearch，发现诸多问题，下面是我遇到一些问题的记录。</span><br></pre></td></tr></table></figure>
</li>
<li><p>问题及解决方案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ERROR: [3] bootstrap checks failed</span><br><span class="line">#文件句柄太少，至少要65536</span><br><span class="line">[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]</span><br><span class="line">#最大线程数太少，至少2048个(经典的2048游戏)</span><br><span class="line">[2]: max number of threads [1024] for user [king] is too low, increase to at least [2048]</span><br><span class="line">#虚拟内存太少，至少262144</span><br><span class="line">[3]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>[1]解决方案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root]# vi &#x2F;etc&#x2F;security&#x2F;limits.conf</span><br><span class="line"></span><br><span class="line"># 添加如下配置：</span><br><span class="line">* soft nofile 65536</span><br><span class="line">* hard nofile 131072</span><br><span class="line">* soft nproc 2048</span><br><span class="line">* hard nproc 4096</span><br></pre></td></tr></table></figure>
<p>[2]解决方案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root]#  vi &#x2F;etc&#x2F;security&#x2F;limits.d&#x2F;90-nproc.conf </span><br><span class="line"></span><br><span class="line">将</span><br><span class="line">*          soft    nproc     1024</span><br><span class="line">改成</span><br><span class="line">*          soft    nproc     2048</span><br></pre></td></tr></table></figure>

<p>[3]解决方案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root]# vim &#x2F;etc&#x2F;sysctl.conf </span><br><span class="line">添加如下代码：</span><br><span class="line">vm.max_map_count&#x3D;655360</span><br><span class="line"></span><br><span class="line">保存后，执行</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>

<p>最后，还有一个错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system call filters failed to install; check the logs and fix your configur                                                                                                             ation or disable system call filters at your own risk</span><br></pre></td></tr></table></figure>
<p>解决方案：<br>在elasticsearch.yml文件中配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root]# vim elasticsearch.yml</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">bootstrap.memory_lock: false</span><br><span class="line">bootstrap.system_call_filter: false</span><br></pre></td></tr></table></figure>


<p>差不多解决上面的问题，应该就能正常运行elsearch了。</p>
<h1 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h1><p>我这里是利用ssh进行远程访问，记录一下基础的运行方式：<br>避免断开连接后<code>elasticsearch</code>就停止运行的运行方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup bin&#x2F;elasticsearch &amp;</span><br></pre></td></tr></table></figure>
<p>当然，也直接直接进行如下命令来运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin&#x2F;elasticsearch -d</span><br></pre></td></tr></table></figure>

<p>关闭ElasticSearch服务就需要用到ps命令，参考如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[elsearch]$  ps -ef|grep elastic</span><br><span class="line">elsearch 22097     1  0 15:06 ?        00:01:24 &#x2F;usr&#x2F;bin&#x2F;java -Xms2g -Xmx2g </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root]# kill -9 22097</span><br></pre></td></tr></table></figure>

<p>【ps】 在选择启动方式的时候，虽然两种方式都能通过ssh启动elasticsearch服务，但是笔者实践证明，非主节点通过<code>bin/elasticsearch -d</code>这条命令启动的服务不能加入到集群中，所以推荐多用<code>nohup bin/elasticsearch &amp;</code>来避免踩雷。</p>
<p>还有一点就是安装head-master，其实也没有太多的坑，只需要按照步骤一步一步来就OK了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">git clone git:&#x2F;&#x2F;github.com&#x2F;mobz&#x2F;elasticsearch-head.git</span><br><span class="line">(如果 没有安装git，也可以采用其他方式下载head-master)</span><br><span class="line"></span><br><span class="line">cd elasticsearch-head</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">（如果提示npm是无效命令，则需要先安装npm，参考步骤如下）</span><br><span class="line"></span><br><span class="line">--安装npm</span><br><span class="line">curl --silent --location https:&#x2F;&#x2F;rpm.nodesource.com&#x2F;setup_5.x | bash -</span><br><span class="line"></span><br><span class="line">yum install -y nodejs</span><br><span class="line"></span><br><span class="line">输入下面的命令是检验:</span><br><span class="line">[root@]# node -v</span><br><span class="line"></span><br><span class="line">[root@]# npm -v</span><br><span class="line">如果不提示是无效命令即成功安装。</span><br><span class="line">----</span><br></pre></td></tr></table></figure>
<p>在安装之后，进行简单的配置：<br>修改elasticsearch-head下Gruntfile.js文件，默认监听在127.0.0.1下9200端口：<br>在<code>connect</code>关键字下，<code>options</code>项中添加一项：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname: &#39;0.0.0.0&#39;,</span><br></pre></td></tr></table></figure>
<p>保存退出后，输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure>
<p>来启动head-master。<br>然后通过浏览器 <a href="http://localhost:9100" target="_blank" rel="noopener">http://localhost:9100</a> 来访问。</p>
<p>到此，记录结束。</p>
<hr>
<p>最后，记录两个比较有用的操作命令</p>
<p>远程启动服务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">方式1：</span><br><span class="line"></span><br><span class="line">nohup bin&#x2F;elasticsearch &amp;</span><br><span class="line"></span><br><span class="line">方式2：</span><br><span class="line">.&#x2F;elasticsearch -d</span><br></pre></td></tr></table></figure>

<p>远程关闭服务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">通过： </span><br><span class="line">ps -ef|grep elastic</span><br><span class="line">获取elastic的PID</span><br><span class="line">然后通过kill命令杀死就OK：</span><br><span class="line">kill -9 22789</span><br></pre></td></tr></table></figure>
<h2 id="彩蛋"><a href="#彩蛋" class="headerlink" title="彩蛋"></a>彩蛋</h2><p>抄袭一下利用pscp传输文件的命令。</p>
<p>1、把服务器上的/root/dir目录取回本地”C:\My Documents\data&quot;目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;pscp.exe -r root@192.168.32.50:&#x2F;root&#x2F;dir &quot;C:\My Documents\data\&quot;</span><br></pre></td></tr></table></figure>
<p>2、把服务器上的/root/file文件取回来本地当前目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;pscp.exe root@192.168.32.50:&#x2F;root&#x2F;file .</span><br></pre></td></tr></table></figure>
<p>3、把本地目录dir、文件file传输到Linux服务器的/root/，并指定服务器端口2009</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;pscp.exe -P 2009 -r dir file root@192.168.32.50:&#x2F;root&#x2F;</span><br></pre></td></tr></table></figure>
<p>4、把本地文件file传输到Linux服务器的/root/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;pscp.exe file root@192.168.32.50:&#x2F;root&#x2F;</span><br></pre></td></tr></table></figure>
<p>它会提示你输入密码，就像Linux下使用scp那样。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="http://blog.csdn.net/KingBoyWorld/article/details/77814528" target="_blank" rel="noopener">CentOS6.5安装ElasticSearch5.5完整纪录与问题总结</a></li>
<li><a href="http://www.jianshu.com/p/e62bd4afe325" target="_blank" rel="noopener">在Linux上安装Elasticsearch5.x</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/10/24/hdfs%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/24/hdfs%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">hdfs基本操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-10-24 09:42:01" itemprop="dateCreated datePublished" datetime="2017-10-24T09:42:01+08:00">2017-10-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2017-10-25 22:00:40" itemprop="dateModified" datetime="2017-10-25T22:00:40+08:00">2017-10-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">后端学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>HDFS（Hadoop Distributed File System）是Hadoop分布式计算中的数据存储系统，是基于流数据模式访问和处理超大文件的需求而开发的。</p>
</blockquote>
<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><p>下面介绍几个hdfs文件系统中几个常见的概念：</p>
<ol>
<li>Block<br>HDFS中的存储单元是每个数据块block，HDFS默认的最基本的存储单位是64M的数据块。</li>
<li>NameNode<br>元数据节点，该节点用来管理文件系统中的命名空间。</li>
<li>DataNode<br>数据节点，是HDFS真正存储数据的地方。</li>
<li>Secondary NameNode<br>从元数据节点，从元数据节点并不是NameNode出现问题时候的备用节点，它的主要功能是周期性的将NameNode中的namespace image和edit log合并，以防log文件过大。</li>
<li>edit log<br>修改日志，用于记录hdfs中文件的相关操作日志。</li>
</ol>
<h1 id="命令操作"><a href="#命令操作" class="headerlink" title="命令操作"></a>命令操作</h1><p>我们可以通过hadoop命令来实现文件的基本操作，包括添创建、删除目录，上传下载文件操作。</p>
<h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><p> 我们可以通过下面的命令来创建一个input目录。<br> <code>hadoop fs -mkdir hdfs://localhost:9000/input</code><br> 这里的<code>hdfs://localhost:9000</code>表示的是本地的hdfs系统，如果是本地的hdsf系统，我们其实可以省略，我们上面的命令可以简写成：<br> <code>hadoop fs -mkdir /input</code><br>当然，如果是远程的hadfs系统，我们就需要标注hdfs地址了，例如<code>hdfs://http://172.22.66.245:9099</code>，想知道hdfs开放的是那个端口，直接直接访问<code>http://localhost:50070/dfshealth.html#tab-overview</code>查看开放端口。<br>综上，我们在远程hdfs系统上创建的一个名为input目录的命令如下：<br><code>hadoop fs -mkdir hdfs://172.22.66.245:9090/input</code></p>
<h2 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h2><p>上传文件的也很简单，基本的格式为<code>hadoop fs -put localFile hdfsFileDir</code><br>其中的<code>localFile</code>代表要上传的文件，<code>hdfsFileDir</code>代表要上传的到hdfs文件系统的目录。<br>例如，我要将D盘根目录下的keseh.txt上传到hdsf文件系统的<code>input</code>目录下，完整的命令如下：<br><code>hadoop fs -put D:\keshe.txt hdfs://localhost:9000/input</code><br>当然，因为是本地的hdfs系统，故hdfs可以省略，即可以简写成：<br><code>hadoop fs -put D:\keshe.txt /input</code><br>当然远程hdfs系统，这个hdfs就不能省略了，示例命令如下：<br><code>hadoop fs -put D:\keshe.txt hdfs://172.22.66.245:9090/input</code></p>
<h2 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h2><p>下载文件的基本格式为<code>hadoop fs -get hdfsFile localFileDir</code>，其中的<code>hdfsFile</code>表示的是hdfs系统中的文件，<code>localFileDir</code>表示要下载的到本地的目录。<br>这里就直接给出示例命令了.<br>从本地的hadfs系统获取，<code>hadoop fs -get hdfs://localhost:9000/input/keshe.txt F:\</code></p>
<p>远程的hdfs系统获取：<code>hadoop fs -get hdfs://172.22.66.245:9090/input/keshe.txt F:\</code></p>
<h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><p>删除文件的格式为<code>hadoop fs -rm hdfsFile</code>或者是<code>hadoop fs -rm -r hdfsFile</code>。<br>每次可以删除多个文件或者目录。例如，删除远程hdfs文件的命令为：<br><code>hadoop fs -rm  hdfs://172.22.66.245:9090/input/keshe.txt</code></p>
<h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><p>以上的操作都比较简单，在简单记录一下hadoop中的基本命令。</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">格式</th>
<th>作用</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ls</td>
<td align="center">hadoop fs -ls /&lt; hdfs dir&gt;</td>
<td>列出hadfs文件系统中某个目录下的文件</td>
<td>hadoop fs -ls hdfs://localhost:9000/input</td>
</tr>
<tr>
<td align="center">put</td>
<td align="center">hadoop fs -put &lt; local file &gt; &lt; hdfs dir &gt;</td>
<td>上传文件或者目录到hdfs系统中指定目录中</td>
<td>hadoop fs -put D:\keshe.txt hdfs://localhost:9000/input</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">hadoop fs -get &lt; hdfs file &gt; &lt; local file or dir&gt;</td>
<td>下载hdfs文件系统中的文件或者目录</td>
<td>hadoop fs -get hdfsFile localFileDir</td>
</tr>
<tr>
<td align="center">moveFromLocal</td>
<td align="center">hadoop fs -moveFromLocal  &lt; local src &gt; … &lt; hdfs dst &gt;</td>
<td>类似于将本地文件剪切到hdfs文件系统中</td>
<td>hadoop fs -moveFromLocal D:\keshe.txt   hdfs://localhost:9000/input</td>
</tr>
<tr>
<td align="center">copyFromLocal</td>
<td align="center">hadoop fs -copyFromLocal  &lt; local src &gt; … &lt; hdfs dst &gt;</td>
<td>类似于将文件从本地复制到hdfs文件系统中</td>
<td>hadoop fs -copyFromLocal D:\keshe.txt   hdfs://localhost:9000/input</td>
</tr>
<tr>
<td align="center">mkdir</td>
<td align="center">hadoop fs -mkdir &lt; hdfs path&gt;</td>
<td>在hdfs文件系统中创建目录</td>
<td>hadoop fs -mkdir hdfs://localhost:9000/input</td>
</tr>
<tr>
<td align="center">rm</td>
<td align="center">hadoop fs -rm &lt; hdfs file &gt; …</td>
<td>删除hdfs文件目录中的文件</td>
<td>hadoop fs -rm  hdfs://localhost:9000/input/keshe.txt</td>
</tr>
<tr>
<td align="center">cp</td>
<td align="center">hadoop fs -cp  &lt; hdfs file &gt;  &lt; hdfs file &gt;</td>
<td>复制hdfs文件或者福文件夹</td>
<td>hadoop fs -cp   hdfs://localhost:9000/input/keshe.txt   hdfs://localhost:9000/input/user</td>
</tr>
<tr>
<td align="center">mv</td>
<td align="center">hadoop fs -mv &lt; hdfs file &gt;  &lt; hdfs file &gt;</td>
<td>移动文件，也可以当着重命名来使用</td>
<td>hadoop fs -cp  hdfs://localhost:9000/input/keshe.txt  hdfs://localhost:9000/haha.txt</td>
</tr>
<tr>
<td align="center">count</td>
<td align="center">hadoop fs -count &lt; hdfs path &gt;</td>
<td>统计hdfs对应路径下的相关信息,显示为目录个数，文件个数，文件总计大小，输入路径</td>
<td>hadoop fs -count  hdfs://localhost:9000/input</td>
</tr>
<tr>
<td align="center">du</td>
<td align="center">hadoop fs -du &lt; hdsf path&gt;</td>
<td>显示hdfs对应路径下每个文件夹和文件的大小</td>
<td>hadoop fs -du  hdfs://localhost:9000/input</td>
</tr>
<tr>
<td align="center">text</td>
<td align="center">hadoop fs -text &lt; hdsf file&gt;</td>
<td>将文本文件或某些格式的非文本文件通过文本格式输出</td>
<td>hadoop fs -text  hdfs://localhost:9000/input/haha.txt</td>
</tr>
</tbody></table>
<p>暂时先记录这么多了，下面我们用代码实现基本的文件操作。</p>
<h1 id="用代码实现"><a href="#用代码实现" class="headerlink" title="用代码实现"></a>用代码实现</h1><p>在真是实现之前，是需要我们提前好代码开发环境的，至于如何搭建，参照前面上一篇博客，这里不再展开。</p>
<h2 id="查看所有目录下的文件"><a href="#查看所有目录下的文件" class="headerlink" title="查看所有目录下的文件"></a>查看所有目录下的文件</h2><p>我们先来看如何查看hdfs文件指定目录下所有的文件信息，即相当于ls命令的。<br>下面就是主要实现，我们住需要在main方法中调用就可以打印出hdfs文件系统中input目录下所有的文件和目录信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">private static void  ListItem()&#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        Configuration config &#x3D; new Configuration();</span><br><span class="line">        Path dfs &#x3D; new Path(&quot;hdfs:&#x2F;&#x2F;172.22.66.245:9090&#x2F;input&quot;);</span><br><span class="line">        FileSystem fileSystem &#x3D; dfs.getFileSystem(config);</span><br><span class="line">        FileStatus[] status &#x3D; fileSystem.listStatus(dfs);</span><br><span class="line">        for (int i &#x3D; 0; i &lt; status.length; i++) &#123;</span><br><span class="line">            System.out.println(status[i].getPath().toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="上传文件-1"><a href="#上传文件-1" class="headerlink" title="上传文件"></a>上传文件</h2><p>代码很简单，直接上代码了,upFile方法实现了将本地D盘根目录下的2017-09-25_093127.jpg图片上传到hdfs文件系统中的input文件夹下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private static void upFile()&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">        Configuration conf &#x3D; new Configuration();</span><br><span class="line">        Path path &#x3D; new Path(&quot;hdfs:&#x2F;&#x2F;172.22.66.245:9090&#x2F;input&quot;);</span><br><span class="line">        Path localPath &#x3D; new Path(&quot;D:\\2017-09-25_093127.jpg&quot;);</span><br><span class="line">        FileSystem fs &#x3D; path.getFileSystem(conf);</span><br><span class="line">        fs.copyFromLocalFile(localPath,path);</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="下载文件-1"><a href="#下载文件-1" class="headerlink" title="下载文件"></a>下载文件</h2><p>下载文件比较坑的一点就是，我们需要先创建一个这样的文件，然后以流的形式传入到填充到这个文件中去，例如下面的示例代码就是将hdfs文件系统中的haha.txt文件的内容写到D盘根目录下的hello.txt文件中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">private static void downFile()&#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            Configuration conf &#x3D; new Configuration();</span><br><span class="line">            Path path &#x3D; new Path(&quot;hdfs:&#x2F;&#x2F;172.22.66.245:9090&#x2F;input&#x2F;haha.txt&quot;);</span><br><span class="line">            FileSystem fs &#x3D; path.getFileSystem(conf);</span><br><span class="line">            FSDataInputStream open &#x3D; fs.open(path);</span><br><span class="line">            OutputStream output &#x3D; new FileOutputStream(&quot;D:&#x2F;&#x2F;hello.txt&quot;);</span><br><span class="line">            IOUtils.copyBytes(open,output,4096,true);</span><br><span class="line"></span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li><a href="https://segmentfault.com/a/1190000002672666" target="_blank" rel="noopener">hadoop HDFS常用文件操作命令</a></li>
<li><a href="http://blog.csdn.net/zh521zh/article/details/51784450" target="_blank" rel="noopener">HDFS中的基础概念</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/10/23/intellij-IDEA-%E9%85%8D%E7%BD%AEhadoop%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/23/intellij-IDEA-%E9%85%8D%E7%BD%AEhadoop%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">intellij IDEA 配置hadoop开发环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2017-10-23 15:10:25 / 修改时间：16:46:48" itemprop="dateCreated datePublished" datetime="2017-10-23T15:10:25+08:00">2017-10-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>在参考了众多的参考资料之后，终于搭建搭建起了了intellij-IDEA开发hadoop环境，下面就记录一下开发环境的建立过程，以免日后遗忘。</p>
</blockquote>
<h1 id="开发工具和基础环境准备"><a href="#开发工具和基础环境准备" class="headerlink" title="开发工具和基础环境准备"></a>开发工具和基础环境准备</h1><p>首先，本次采用的开发工具选用的是intellij-IDEA，在进行本次开发之前需要将intellij-IDEA下载并安装好，并配置好java的JDK。下面是我本次配置开发环境之前的基础环境，本次采用的是hadoop 2.6.0的版本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IntelliJ IDEA 2017.2.4</span><br><span class="line">Build #IC-172.4155.36, built on September 12, 2017</span><br><span class="line">JRE: 1.8.0_152-release-915-b11 amd64</span><br><span class="line">JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o</span><br><span class="line">Windows 10 10.0</span><br></pre></td></tr></table></figure>
<p>在下载好hadoop之后，我们便可以开始本次环境的配置了。</p>
<h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><p>这一步非常的简单，我们用IDEA创建一下普通的java项目即可。</p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.jpg" alt=""><br>创建项目完成之后是这个样子的。<br><img src="http://ovec6nnof.bkt.clouddn.com/%E5%88%9B%E5%BB%BA%E5%AE%8C%E6%88%90.jpg" alt=""></p>
<h1 id="添加示例代码"><a href="#添加示例代码" class="headerlink" title="添加示例代码"></a>添加示例代码</h1><p>我们先不管三七二十一，在我们的项目中，先copy下面三个类，用来检测环境是否搭建好。<br>第一个类<code>WordCountMapper</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.hadoop.io.IntWritable;</span><br><span class="line">import org.apache.hadoop.io.LongWritable;</span><br><span class="line">import org.apache.hadoop.io.Text;</span><br><span class="line">import org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.StringTokenizer;</span><br><span class="line"></span><br><span class="line">public class WordCountMapper  extends Mapper&lt;LongWritable,Text,Text,IntWritable&gt; &#123;</span><br><span class="line">    private final static IntWritable one &#x3D; new IntWritable(1);</span><br><span class="line">    private Text word &#x3D; new Text();</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">        StringTokenizer itr &#x3D; new StringTokenizer(value.toString());</span><br><span class="line">        while (itr.hasMoreTokens())&#123;</span><br><span class="line">            word.set(itr.nextToken());</span><br><span class="line">            context.write(word,one);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二个类:<code>WordCountReducer</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import org.apache.hadoop.io.IntWritable;</span><br><span class="line"></span><br><span class="line">import org.apache.hadoop.io.Text;</span><br><span class="line">import org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class WordCountReducer extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; &#123;</span><br><span class="line"></span><br><span class="line">    private IntWritable result &#x3D; new IntWritable();</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">        int sum &#x3D; 0;</span><br><span class="line">        for(IntWritable val:values)&#123;</span><br><span class="line">            sum +&#x3D; val.get();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        result.set(sum);</span><br><span class="line">        context.write(key,result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第三个测试类：<code>test</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.hadoop.conf.Configuration;</span><br><span class="line">import org.apache.hadoop.fs.Path;</span><br><span class="line">import org.apache.hadoop.io.IntWritable;</span><br><span class="line">import org.apache.hadoop.io.Text;</span><br><span class="line">import org.apache.hadoop.mapreduce.Job;</span><br><span class="line">import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line">import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line">import org.apache.log4j.chainsaw.Main;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException &#123;</span><br><span class="line">        &#x2F;&#x2F; write your code here</span><br><span class="line"></span><br><span class="line">        Configuration configuration &#x3D; new Configuration();</span><br><span class="line"></span><br><span class="line">        if(args.length!&#x3D;2)&#123;</span><br><span class="line">            System.err.println(&quot;Usage:wordcount &lt;input&gt;&lt;output&gt;&quot;);</span><br><span class="line">            System.exit(2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Job job &#x3D; new Job(configuration,&quot;word count&quot;);</span><br><span class="line"></span><br><span class="line">        job.setJarByClass(Main.class);</span><br><span class="line">        job.setMapperClass(WordCountMapper.class);</span><br><span class="line">        job.setReducerClass(WordCountReducer.class);</span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line">        FileInputFormat.addInputPath(job,new Path(args[0]));</span><br><span class="line">        FileOutputFormat.setOutputPath(job,new Path(args[1]));</span><br><span class="line"></span><br><span class="line">        System.exit(job.waitForCompletion(true)?0:1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>把代码copy完成之后，项目结构应该是这样子的：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E5%A4%8D%E5%88%B6%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%88%90.jpg" alt=""></p>
<p>可以看到，ide提示我们代码还有错，这是因为我们环境还没有搭建完成，所以报错，我们接下来继续下一步。</p>
<h1 id="导入hadoop相关的jar包"><a href="#导入hadoop相关的jar包" class="headerlink" title="导入hadoop相关的jar包"></a>导入hadoop相关的jar包</h1><p>我们首先需要知道我们要导入的jar包的具体位置： <code>\hadoop-2.6.0\share\hadoop</code>，即在hadoop根目录下的share文件夹中的hadoop文件夹中。<br>然后在IDEA中打开project Structure选项，快捷键<code>ctrl+alt+shift+S</code>。选择modules，如图：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E9%80%89%E6%8B%A9modules.jpg" alt=""></p>
<p>选择右边的加号-&gt; jars 如图：</br><br><img src="http://ovec6nnof.bkt.clouddn.com/%E6%B7%BB%E5%8A%A0jar.jpg" alt=""></p>
<p>选择hadoop的jar，具体位置我们前面已经说过了，将hadoop文件夹中所有的文件都选中，按住shift即可多选：<br><img src="" alt=""><br>jar导入完成之后，应该是这个样子的：<br><img src="http://ovec6nnof.bkt.clouddn.com/jar%E5%AF%BC%E5%85%A5%E5%AE%8C%E6%88%90.jpg" alt=""></p>
<p>然后在Project Settings中选择Artifacts，如图：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E9%80%89%E6%8B%A9Artifacts.jpg" alt=""><br>选择加号-&gt;JAR -&gt; Emptry创建一个空的jar。选择完成后如图：</p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84jar.jpg" alt=""><br>我们将其取名为<code>hadoop</code>,并选择output Layout下面的加号-&gt;Module Output，并勾选include in prokecy builde,完成后如图所示：</p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/%E5%88%9B%E5%BB%BAjar%E5%AE%8C%E6%88%90.jpg" alt=""></p>
<p>完成上面的操作后，发现我们前面copy的代码已经不在报错了，说明jar包已经成功导入到我们的项目中来了。最后我们需要配置我们的运行环境。</p>
<h1 id="配置运行环境"><a href="#配置运行环境" class="headerlink" title="配置运行环境"></a>配置运行环境</h1><p>首先选择edit Configurtions,如图；<br><img src="http://ovec6nnof.bkt.clouddn.com/%E9%80%89%E6%8B%A9edit%20Configuratiobns.jpg" alt=""><br>新建application，具体做法，点击右上角的加号-&gt;选择application。新建界面如图所示：</p>
<p><img src="http://ovec6nnof.bkt.clouddn.com/applicatuon%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE.jpg" alt=""><br>我们需要填的只有三处，首先我们可以为他取个名字，在Name那么输入自定义的名义，然后再Main class那里填写：<code>org.apache.hadoop.util.RunJar</code>，选择progream arguments右边的展开按钮，填写此项的值，在这里需要填写三个参数，第一个就是我们前面创建jar的具体位置，我们可以在前面常见的artifacts中查看，示例<code>D:\intellijIDEA\hadoopTest\out\artifacts\hadoop\hadoop.jar</code>；第二个参数是我们要运行类的名字（需要加上包名）示例<code>com.hut.Test</code>;第三个是输入文件的位置,示例<code>input/</code>；第四个是输入文件的名字示例``output/；<br>参考配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D:\intellijIDEA\hadoopTest\out\artifacts\hadoop\hadoop.jar</span><br><span class="line">com.hut.Test</span><br><span class="line">input&#x2F;</span><br><span class="line">output&#x2F;</span><br></pre></td></tr></table></figure>
<p><img src="http://ovec6nnof.bkt.clouddn.com/program%20agrumets%E5%8F%82%E6%95%B0%E5%80%BC.jpg" alt=""></p>
<p>这里需要根据自己项目的实际情况来进行配置，仅供参考。<br><img src="http://ovec6nnof.bkt.clouddn.com/%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90.jpg" alt=""></p>
<h1 id="运行检测"><a href="#运行检测" class="headerlink" title="运行检测"></a>运行检测</h1><p>根据我们前面的配置，我们需要在项目的根目录下新建一个input文件夹。我们可以在这个文件夹中添加一个txt的文件，并随意的写入一些数据。<br>然后点击运行，成功运行后，会发现我们项目根目录下新添加了一个output文件夹，在<code>part-r-0000</code>文件中，就记录了我们在input文件夹中文件单词出现的次数。如图：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8C~.jpg" alt=""><br>值得注意的是，每次成功运行，都需要将output文件夹删除后才能继续下一次的运行。</p>
<p>到此，我们的环境已经配置好了，接下来就可以开开心的学习hadoop的api使用了。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="http://blog.csdn.net/u010171031/article/details/53024516" target="_blank" rel="noopener">Hadoop Intellij IDEA本地开发环境搭建</a></li>
<li><a href="http://blog.csdn.net/duhe2665991640/article/details/60468966" target="_blank" rel="noopener">intellij idea本地开发调试hadoop的方法</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/10/19/%E8%B5%84%E6%BA%90%E7%BD%91%E7%AB%99%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/19/%E8%B5%84%E6%BA%90%E7%BD%91%E7%AB%99%E6%95%B4%E7%90%86/" class="post-title-link" itemprop="url">资源网站整理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-10-19 20:19:29" itemprop="dateCreated datePublished" datetime="2017-10-19T20:19:29+08:00">2017-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2017-11-07 22:31:20" itemprop="dateModified" datetime="2017-11-07T22:31:20+08:00">2017-11-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%B5%84%E6%BA%90/" itemprop="url" rel="index"><span itemprop="name">资源</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>不知不觉，四年的下来，还是收集整理了不少的网站，在此统一整理一下，以免以后遗忘。</p>
<h1 id="UI素材类"><a href="#UI素材类" class="headerlink" title="UI素材类"></a>UI素材类</h1><p>在这里记录的是比较常用的图片网站</p>
<h2 id="精美图片"><a href="#精美图片" class="headerlink" title="精美图片"></a>精美图片</h2><p>以下网站是我认为比较好的图片资源网站，更多的图片资源网站，可以参考<a href="https://www.zhihu.com/question/19619335" target="_blank" rel="noopener">知乎的讨论</a>。下面就介绍几个我认为比较好的图片素材网站（更多的是免费）</p>
<h3 id="Pixabay-com"><a href="#Pixabay-com" class="headerlink" title="Pixabay.com"></a><a href="https://pixabay.com/" target="_blank" rel="noopener">Pixabay.com</a></h3><p><strong>Pixabay有可在任何地方使用的免费图片和视频</strong></br><br><a href="https://pixabay.com/" target="_blank" rel="noopener">https://pixabay.com/</a></br><br>Pixabay是一个充满活力的创意社区，分享免费的图片和视频。所有的内容都是在Creative Commons CC0下发布的，这使得它们可以安全的使用，而无需为创作者署名——即使是出于商业目的。<br><img src="https://cdn.pixabay.com/photo/2017/08/26/03/16/mid-finger-2682074_960_720.jpg" alt=""><br>强力推荐，图片又多有好看！重要的是还不要钱，貌似也不用梯子。</p>
<h3 id="Pexels"><a href="#Pexels" class="headerlink" title="Pexels"></a><a href="https://www.pexels.com/" target="_blank" rel="noopener">Pexels</a></h3><p>Pexels 是一个和pixabay 类似的免费高清图片网站。<a href="https://www.pexels.com/" target="_blank" rel="noopener">https://www.pexels.com/</a><br>打开它的主页，中间一个输入框，下面会精选出搜索最热门的关键词、图片，还有免费提供的博主专栏。<br>你还可以将自己的图片上传至Pexels，分享给更多的人使用，你可以根据颜色搜索，它同时也提供了电脑客户端。<br>你可以个人和商业引用，甚至可以重新分发，它遵循CC0 协议。<br><img src="http://ovec6nnof.bkt.clouddn.com/PEXSLS%E7%95%8C%E9%9D%A2.jpg" alt="Pexels界面"></p>
<h3 id="摄图网"><a href="#摄图网" class="headerlink" title="摄图网"></a><a href="http://699pic.com/" target="_blank" rel="noopener">摄图网</a></h3><p><strong>1373737张高清图片免费下载</strong></br><a href="http://699pic.com/" target="_blank" rel="noopener">http://699pic.com/</a><br>100%正版，可商用，免费下载，精品更新；<br>摄图网上的图片还是比较多的，而且质量也比较可以，可以算的上国内比较好的图片资源网站；<br><img src="http://ovec6nnof.bkt.clouddn.com/%E6%91%84%E5%9B%BE%E7%BD%91%E7%95%8C%E9%9D%A2.jpg" alt="摄图网"></p>
<h3 id="Shutterstock"><a href="#Shutterstock" class="headerlink" title="Shutterstock"></a><a href="https://www.shutterstock.com/" target="_blank" rel="noopener">Shutterstock</a></h3><p>Shutterstock <a href="https://www.shutterstock.com/" target="_blank" rel="noopener">https://www.shutterstock.com/</a> 是一家全球技术公司，创建了一个最大、最具活力的双向市场供创意专业人士授权内容，这些内容包括图片、视频和音乐，以及推动创意过程的创新工具。<br>公司已扩展其产品组合，现在包括 Bigstock（以价值为导向的库存媒体机构）、PremiumBeat（特选免版税音乐库）、Rex Features（为全球媒体提供最好的编辑图片源）和 WebDAM（基于云的企业数字资产管理平台），同时创建了 Offset（高端图片精选）。<br><img src="http://ovec6nnof.bkt.clouddn.com/Shutterstock%E7%95%8C%E9%9D%A2.png" alt="Shutterstock"></p>
<h3 id="Everypixel"><a href="#Everypixel" class="headerlink" title="Everypixel"></a><a href="https://everypixel.com/" target="_blank" rel="noopener">Everypixel</a></h3><p>Everypixel <a href="https://everypixel.com/" target="_blank" rel="noopener">https://everypixel.com/</a>是一个 强大的搜索引擎索引 51付费和免费图片的网站，允许用户通过搜索 海量数据库的秒照片。它汇集多家网络素材源，并且利用AI 技术自动移除那些不太好看的内容。<br>它还有很多筛选功能，你可以选择图片来源的网站，图片类型，还可以筛选不同颜色。<br>最重要的是还可以筛选免费的照片。</p>
<h3 id="千图网"><a href="#千图网" class="headerlink" title="千图网"></a><a href="http://www.58pic.com/" target="_blank" rel="noopener">千图网</a></h3><p>千图网<a href="http://www.58pic.com/" target="_blank" rel="noopener">http://www.58pic.com/</a>经过4年的素材积累和数据沉淀，千图网搭建了一个以创意作品库为核心，围绕着设计人群及泛办公人群提供优质创意服务的共享平台。服务内容涵盖了平面广告、电商淘宝、装饰装修、网页UI、产品工业7大主流设计服务，以及PPT模板、Excel模板、文库模板、高清配图、视频音频5大办公人群常用服务，共计60多项细分服务。<br><img src="http://ovec6nnof.bkt.clouddn.com/%E5%8D%83%E5%9B%BE%E7%BD%91%E7%95%8C%E9%9D%A2.png" alt="千图网"></p>
<h3 id="别样网"><a href="#别样网" class="headerlink" title="别样网"></a><a href="http://www.ssyer.com/" target="_blank" rel="noopener">别样网</a></h3><p>别样网<a href="http://www.ssyer.com/" target="_blank" rel="noopener">http://www.ssyer.com/</a>是一个国内的图片分享网站，和pixabay一样都是免版权和免授权使用的。图片大部分都经过后期处理，风景、人物、小清新各种风格应有尽有。</br><br>优点：图片清晰度高，富有美感，网站加载速度快。</br><br>缺点：图片数量偏少，没有搜索功能。</br><br><img src="http://ovec6nnof.bkt.clouddn.com/%E5%88%AB%E6%A0%B7%E7%BD%91.jpg" alt="别样网"></p>
<h2 id="海量图标"><a href="#海量图标" class="headerlink" title="海量图标"></a>海量图标</h2><h3 id="iconfont"><a href="#iconfont" class="headerlink" title="iconfont"></a><a href="http://iconfont.cn/" target="_blank" rel="noopener">iconfont</a></h3><p>阿里妈妈MUX倾力打造的矢量图标管理、交流平台<a href="http://iconfont.cn/" target="_blank" rel="noopener">http://iconfont.cn/</a>。<br>设计师将图标上传到Iconfont平台，用户可以自定义下载多种格式的icon，平台也可将图标转换为字体，便于前端工程师自由调整与调用。<br><img src="http://ovec6nnof.bkt.clouddn.com/iconfont%E7%95%8C%E9%9D%A2.jpg" alt="iconfont"></p>
<h3 id="Icons8"><a href="#Icons8" class="headerlink" title="Icons8"></a><a href="https://zh.icons8.com/" target="_blank" rel="noopener">Icons8</a></h3><p>Icons8 <a href="https://zh.icons8.com/" target="_blank" rel="noopener">https://zh.icons8.com/</a> 是一个提供免费iOS、Windows、Android的平面化设计图案为主的搜索引擎，目前提供近4万个素材资源，数量非常丰富，同时网站也提供各种格式，各种尺寸和配色，让使用者也能自定义制作。<br><img src="http://ovec6nnof.bkt.clouddn.com/icons8%E7%95%8C%E9%9D%A2.jpg" alt="Icons8"></p>
<h3 id="easyIcon"><a href="#easyIcon" class="headerlink" title="easyIcon"></a><a href="http://www.easyicon.net/" target="_blank" rel="noopener">easyIcon</a></h3><p>提供超过四十六万个PNG、ICO、ICNS格式图标搜索、图标下载服务。<a href="http://www.easyicon.net/" target="_blank" rel="noopener">http://www.easyicon.net/</a><br><img src="http://ovec6nnof.bkt.clouddn.com/easyicon%E7%95%8C%E9%9D%A2.jpg" alt="easyIcon"></p>
<h3 id="material-design-icon"><a href="#material-design-icon" class="headerlink" title="material design icon"></a><a href="https://material.io/icons/" target="_blank" rel="noopener">material design icon</a></h3><p>相信android开发者于这个网站会比较熟悉，没错，他就是material icons。<a href="https://material.io/icons/" target="_blank" rel="noopener">https://material.io/icons/</a><br><img src="http://ovec6nnof.bkt.clouddn.com/materical%20io%E7%95%8C%E9%9D%A2.jpg" alt="material"></p>
<h3 id="iconmonstr"><a href="#iconmonstr" class="headerlink" title="iconmonstr"></a><a href="http://iconmonstr.com" target="_blank" rel="noopener">iconmonstr</a></h3><p>有时候我们的设计仅需要简简单单的勾勒创作即可，不需要繁杂的效果与艳丽的颜色搭配！今天给大家介绍这么一个朴实、朴素的图标素材网站 iconmonstr ，该网站的图标素材提供的格式分为PNG、SVG格式。<a href="http://iconmonstr.com" target="_blank" rel="noopener">http://iconmonstr.com</a><br><img src="https://pic.brushes8.com/uploads/2013/02/112545.jpg" alt="iconmonstr界面"></p>
<h3 id="fontawesome"><a href="#fontawesome" class="headerlink" title="fontawesome"></a><a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener">fontawesome</a></h3><p>一套绝佳的图标字体库和CSS框架,为您提供可缩放的矢量图标，您可以使用CSS所提供的所有特性对它们进行更改，包括：大小、颜色、阴影或者其它任何支持的效果。<a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener">http://www.fontawesome.com.cn/</a><br><img src="http://ovec6nnof.bkt.clouddn.com/fontawesome%E7%95%8C%E9%9D%A2.jpg" alt="fontawesome"></p>
<h3 id="ionicons"><a href="#ionicons" class="headerlink" title="ionicons"></a><a href="http://ionicons.com/" target="_blank" rel="noopener">ionicons</a></h3><p>iOnicons是一个提供免费ICON图标素材的站点，同时还提供CDN加速服务，该图标集采用 MIT 许可证，用sass来开发，前端网页设计师们可在商业应用中使用，设计出最佳的网页模版。<a href="http://ionicons.com/" target="_blank" rel="noopener">http://ionicons.com/</a></br><br><img src="http://www.egouz.com/uploadfile/2016/0219/20160219090352108.jpg" alt="ss"></p>
<h2 id="创新设计"><a href="#创新设计" class="headerlink" title="创新设计"></a>创新设计</h2><h3 id="lofter"><a href="#lofter" class="headerlink" title="lofter"></a><a href="http://www.lofter.com/" target="_blank" rel="noopener">lofter</a></h3><p>LOFTER汇聚了数百万的摄影、胶片玩家，绘画及动漫爱好者，并不断衍生出更多的兴趣圈子，无论是设计、<br>艺术、科技、时尚、旅行、读书、电影评论都有精彩的人与内容不断产出。<a href="http://www.lofter.com/" target="_blank" rel="noopener">http://www.lofter.com/</a><br><img src="http://ovec6nnof.bkt.clouddn.com/lofter%E5%81%87%E9%9D%A2.jpg" alt="lofter"></p>
<h3 id="Ui中国"><a href="#Ui中国" class="headerlink" title="Ui中国"></a><a href="http://www.ui.cn/" target="_blank" rel="noopener">Ui中国</a></h3><p>UI中国<a href="http://www.ui.cn/" target="_blank" rel="noopener">http://www.ui.cn/</a>，前身为iconfans.com。是专业的界面设计师交流、学习、展示平台。同时也是中国最大的UI设计师聚集地，会员均为一线UI设计师，覆盖主流互联网公司。我们希望借助互联网的力量打造国内最专业的UI设计平台，为UI设计师做最好的服务，提高UI设计行业价值！<br>前身iconfans.com，自2008年发展至今已有6年积累。历年来，iconfans曾经组织会员参与过一系列的国内外的设计竞赛，并取得了优异成绩。每年举办一届行业聚会。在我们的会员中赢得了口碑。不断的推出一些会员活动、曾经与小米、百度、腾讯、新浪、搜狐、锤子科技（Smartisan ）、360桌面、点点网、搜狗、华为等知名互联网公司和企业合作活动。<br>未来，UI中国，将继续以UI设计师为中心，为UI设计师做最好的服务，提高UI设计行业价值！</p>
<h3 id="前端里"><a href="#前端里" class="headerlink" title="前端里"></a><a href="http://www.yyyweb.com/" target="_blank" rel="noopener">前端里</a></h3><p>前端里<a href="http://www.yyyweb.com/" target="_blank" rel="noopener">http://www.yyyweb.com/</a>专注 Web 开发技术，分享最前沿的 Web 开发教程、资源和和素材，是面向程序开发人员和设计师的学习交流平台。<br><img src="http://ovec6nnof.bkt.clouddn.com/%E5%89%8D%E7%AB%AF%E9%87%8C%E7%95%8C%E9%9D%A2.jpg" alt="前端里"></p>
<h2 id="通用模板"><a href="#通用模板" class="headerlink" title="通用模板"></a>通用模板</h2><h3 id="优品PPT"><a href="#优品PPT" class="headerlink" title="优品PPT"></a><a href="http://www.ypppt.com/" target="_blank" rel="noopener">优品PPT</a></h3><p>一个有情怀的免费PPT模板下载网站！<a href="http://www.ypppt.com/" target="_blank" rel="noopener">http://www.ypppt.com/</a><br><img src="http://ovec6nnof.bkt.clouddn.com/%E4%BC%98%E5%93%81ppt%E7%95%8C%E9%9D%A2.jpg" alt="优品PPT"></p>
<h1 id="学习资料类"><a href="#学习资料类" class="headerlink" title="学习资料类"></a>学习资料类</h1><h2 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h2><h3 id="CSDN"><a href="#CSDN" class="headerlink" title="CSDN"></a><a href="http://blog.csdn.net/" target="_blank" rel="noopener">CSDN</a></h3><p>CSDN <a href="https://www.csdn.net/" target="_blank" rel="noopener">https://www.csdn.net/</a> (Chinese Software Developer Network) 创立于1999年，是中国最大的IT社区和服务平台，为中国的软件开发者和IT从业者提供知识传播、职业发展、软件开发等全生命周期服务，满足他们在职业发展中学习及共享知识和信息、建立职业发展社交圈、通过软件开发实现技术商业化等刚性需求。拥有超过3000万注册会员（其中活跃会员800万）、50万注册企业及合作伙伴。</p>
<p>旗下拥有：全球最大中文IT技术社区：csdn、权威IT专业技术期刊：《程序员》杂志、IT人力资源服务：科锐福克斯、IT技术学习平台：乐知教育、代码托管+社交编程平台：code、移动开发工具和服务聚合平台：mobilehub、IT专属求职网站：job、中文软件外包和项目交易平台：csto、程序员深度交流社区：iteye、中国最大技术管理者平台：CTO俱乐部、云计算产业人士沙龙：云计算俱乐部、面向移动开发者的技术组织：移动开发者俱乐部、面向全国大学生的技术组织：高校俱乐部。</p>
<h3 id="简书"><a href="#简书" class="headerlink" title="简书"></a><a href="http://www.jianshu.com/" target="_blank" rel="noopener">简书</a></h3><p>简书<a href="http://www.jianshu.com/" target="_blank" rel="noopener">http://www.jianshu.com/</a>  是一个创作社区，任何人均可以在其上进行创作。用户在简书上面可以方便的创作自己的作品，互相交流。简书成为国内优质原创内容输出平台。</p>
<h3 id="博客园"><a href="#博客园" class="headerlink" title="博客园"></a><a href="https://www.cnblogs.com/" target="_blank" rel="noopener">博客园</a></h3><p>一个IT技术人员想为IT技术人员们提供一个纯净的技术交流空间，博客园很长时间只有一个不能再简单的博客，有近四年，博客园仅靠一个人几年工作的积蓄在维持，互联网浪潮的此起彼伏，“博客”从耀眼的明星成为平民，这些似乎都与博客园无关，博客园一步一个脚印地走着自己的路，傻傻地对每个用户注册进行人工审批、对首页内容宁缺毋滥、对不合适的广告拒之门外，傻傻地对用户体验关怀备至，对盈利模式冷若冰霜。<br>访问链接： <a href="https://www.cnblogs.com/" target="_blank" rel="noopener">https://www.cnblogs.com/</a></p>
<h3 id="掘金"><a href="#掘金" class="headerlink" title="掘金"></a><a href="https://juejin.im/" target="_blank" rel="noopener">掘金</a></h3><p>掘金技术 <a href="https://juejin.im/" target="_blank" rel="noopener">https://juejin.im/</a> 社区是中国质量最高的技术分享社区，邀请稀土用户作为 Co-Editor 来分享优质的技术干货，从前端到后端开发，从设计到产品，让每一个掘金用户都能挖掘到有价值的干货。</p>
<h2 id="网上视频学习"><a href="#网上视频学习" class="headerlink" title="网上视频学习"></a>网上视频学习</h2><h3 id="慕课网"><a href="#慕课网" class="headerlink" title="慕课网"></a><a href="http://www.imooc.com/" target="_blank" rel="noopener">慕课网</a></h3><p>程序员的梦工厂&lt;(<a href="http://www.imooc.com/&gt;，源于国外，Massive（大规模）Open（开放）Online（在线）Course（课程）。提供大量优质的免费教程，也提供职业路径学习，收费的项目实战。" target="_blank" rel="noopener">http://www.imooc.com/&gt;，源于国外，Massive（大规模）Open（开放）Online（在线）Course（课程）。提供大量优质的免费教程，也提供职业路径学习，收费的项目实战。</a></p>
<h3 id="极客学院"><a href="#极客学院" class="headerlink" title="极客学院"></a><a href="http://ke.jikexueyuan.com/" target="_blank" rel="noopener">极客学院</a></h3><p>极客学院<a href="http://www.jikexueyuan.com/" target="_blank" rel="noopener">http://www.jikexueyuan.com/</a>  是中国android开发在线学习平台，汇集了几十名国内顶尖的有多年项目和实战经验的Android开发授课大师，精心制作了上千个高质量视频教程，涵盖了Android开发学习的基础入门、中级进阶，高级提升、项目实战开发等专业的android开发课程。<br>极客学院背后是一支疯狂喜欢编程，狂热开发移动app的超有活力团队。他们希望通过最新的，高质量的，专业实战的在线开发课程打破传统的编程学习模式，以新一代的编程学习模式帮助开发者更快更好的学习Android开发，帮助开发者通过技术实现自己的理想。<br>作为国内最大IT职业在线教育平台，极客学院一直致力于“让学习更有效”，帮助IT从业者在最短的时间内获得最多的知识，技能得到最快的提升。目前，极客学院已拥有60多万IT从业者用户。</p>
<h3 id="网易云课堂"><a href="#网易云课堂" class="headerlink" title="网易云课堂"></a><a href="http://study.163.com/" target="_blank" rel="noopener">网易云课堂</a></h3><p>网易云课堂&lt;(<a href="http://study.163.com/&gt;，是网易公司打造的在线实用技能学习平台，该平台于2012年12月底正式上线，主要为学习者提供海量、优质的课程，用户可以根据自身的学习程度，自主安排学习进度。" target="_blank" rel="noopener">http://study.163.com/&gt;，是网易公司打造的在线实用技能学习平台，该平台于2012年12月底正式上线，主要为学习者提供海量、优质的课程，用户可以根据自身的学习程度，自主安排学习进度。</a><br>网易云课堂立足于实用性的要求，网易云课堂与多家教育、培训机构建立合作，课程数量已达4100+，课时总数超50000,涵盖实用软件、IT与互联网、外语学习、生活家居、兴趣爱好、职场技能、金融管理、考试认证、中小学、亲子教育等十余大门类。</p>
<h3 id="麦子学院"><a href="#麦子学院" class="headerlink" title="麦子学院"></a><a href="http://www.maiziedu.com/" target="_blank" rel="noopener">麦子学院</a></h3><p>麦子学院<a href="http://www.maiziedu.com/" target="_blank" rel="noopener">http://www.maiziedu.com/</a>，国内第一家在美国建立商务中心的IT在线教育机构，目前已与美国知名教育公司取得合作，未来将源源不断向国内输出大量高质量教育资源<br>前身麦可网，2014年，麦可网完成千万级A轮融资，并更名为”麦子学院“，同时通过“麦子圈”IT职业实名社交圈——提供包括企业招聘对接，猎头，项目外包，经验分享，职业交友等一系列增值服务。<br>做在线职业教育示范学院，将教育和课程做到极致。除了提供高质量的课程学习之外，也提供包括就业推荐，职业交友，项目外包，创业服务等全面的增值服务，并且线上线下结合，移动设备和传统网络相结合，打造IT职业教育的一个完整生态链。<br>以高端IT技术型人才培养及服务为核心，探索及倡导技术交流创新模式。提供的不仅仅是技能培养，而是务实的职业导向。</p>
<h3 id="中国大学Mooc"><a href="#中国大学Mooc" class="headerlink" title="中国大学Mooc"></a><a href="http://www.icourse163.org/" target="_blank" rel="noopener">中国大学Mooc</a></h3><p>中国mooc <a href="http://www.icourse163.org/" target="_blank" rel="noopener">http://www.icourse163.org/</a>,汇集名校名师的优秀课程，让我们可以通过网络的方式来学习优质的免费课程！大赞，有点免费大学的感觉~</p>
<h3 id="开课吧"><a href="#开课吧" class="headerlink" title="开课吧"></a><a href="http://www.kaikeba.com/" target="_blank" rel="noopener">开课吧</a></h3><p>开课吧<a href="http://www.kaikeba.com/" target="_blank" rel="noopener">http://www.kaikeba.com/</a> 是指作为慧科教育的重要成员企业，开课吧是中文泛IT在线教育平台，传承了慧科教育专注前沿科技、创新人才培养模式的基因，并积极探索在线教育模式创新。<br>开课吧集在线课程的创意、设计、前期拍摄、后期制作、 综合运营为一体，专注于移动开发、云计算、互联网营销等八大类泛IT课程，不断面向个人、高校和企事业单位提供在线产品研发咨询服务、在线课程制作服务、MOOC 平台服务、导学服务和认证服务等综合在线教育解决方案。</p>
<h3 id="计蒜客"><a href="#计蒜客" class="headerlink" title="计蒜客"></a><a href="http://www.jisuanke.com/" target="_blank" rel="noopener">计蒜客</a></h3><p>计蒜客 <a href="http://www.jisuanke.com/" target="_blank" rel="noopener">http://www.jisuanke.com/</a> 为弥合工业界、学术界对于优秀计算机人才的缺口而诞生，致力于为全国乃至全球希望投身计算机领域的人才提供高性价比的学习机会，培养快速学习、拥抱变化、敢于发现的优秀工程师与学术精英。大部分是收费的。</p>
<h3 id="实验楼"><a href="#实验楼" class="headerlink" title="实验楼"></a><a href="https://www.shiyanlou.com/" target="_blank" rel="noopener">实验楼</a></h3><p>实验楼 <a href="https://www.shiyanlou.com/" target="_blank" rel="noopener">https://www.shiyanlou.com/</a> 是国内领先的IT技术实训平台，采用创新的“在线实验”学习模式，为学生及在职程序员提供编程、运维、测试、云计算、大数据、数据库等最新的IT技术实践课程。<br>实验楼建设初衷是帮助学习者通过动手实践收获知识，同时体会实验精神。德国教育学家斯普朗格说：“教育的最终目的不是传授已有的东西，而是要把人的创造力量诱导出来”，实验楼设计理念也是如此：从实践切入，依靠交互性、操作性更强的课程，理论学习+动手实践共同激发你的创造力。</p>
<h3 id="腾讯课堂"><a href="#腾讯课堂" class="headerlink" title="腾讯课堂"></a><a href="https://ke.qq.com/" target="_blank" rel="noopener">腾讯课堂</a></h3><p>腾讯课堂 <a href="https://ke.qq.com/" target="_blank" rel="noopener">https://ke.qq.com/</a> 是腾讯推出的专业在线教育平台，聚合了优质教育机构和教师的海量课程资源。作为开放式的平台，腾讯课堂计划帮助线下教育机构入驻，共同探索在线教育新模式，这无形中又为在线教育O2O增添了几分热度。</p>
<p>腾讯课堂凭借QQ客户端的优势，实现在线即时互动教学；并利用QQ积累多年的音视频能力，提供流畅、高音质的课程直播效果；同时支持PPT演示、屏幕分享等多样化的授课模式，还为教师提供白板、提问等能力。 腾讯创建在线教育平台—腾讯课堂，改善了中国教育资源分布和发展不均的现状，依托互联网，打破地域的限制，让每个立志学习，有梦想的人，都能接受优秀老师的指导和教学；同时希望给优秀的机构及教师一个展示的平台。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/10/17/hadoop%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/17/hadoop%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">hadoop入门基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-10-17 19:34:05" itemprop="dateCreated datePublished" datetime="2017-10-17T19:34:05+08:00">2017-10-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2017-10-25 22:54:06" itemprop="dateModified" datetime="2017-10-25T22:54:06+08:00">2017-10-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">后端学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p><a href="http://hadoop.apache.org/" target="_blank" rel="noopener">Apache Hadoop</a>是一个在商业硬件大型集群上运行应用程序的框架。Hadoop框架为应用程序提供透明的可靠性和数据运动。Hadoop实现了一个名为<a href="https://wiki.apache.org/hadoop/HadoopMapReduce" target="_blank" rel="noopener">Map / Reduce</a>的计算范例，其中应用程序分为许多小的工作片段，每个工作片段都可以在集群中的任何节点上执行或重新执行。此外，它还提供了一种在计算节点上存储数据的分布式文件系统（<a href="https://wiki.apache.org/hadoop/DFS" target="_blank" rel="noopener">HDFS</a>），可在集群中提供非常高的聚合带宽。两者的<a href="https://wiki.apache.org/hadoop/MapReduce" target="_blank" rel="noopener">MapReduce</a>和Hadoop分布式文件系统的设计使得节点故障是由框架自动处理。</p>
</blockquote>
<h1 id="hadoop功能与优势"><a href="#hadoop功能与优势" class="headerlink" title="hadoop功能与优势"></a>hadoop功能与优势</h1><p>hadoop是什么我们前面已经介绍过了，下面我们主要介绍他的几个核心部分：</p>
<ol>
<li>HDFS：分布式文件系统，存储海量的数据</li>
<li>MapReduce：并行处理框架，实现任务分解和调度。<br>我们一般用hadoop来搭建大型数据仓库、PB级数据的存储、处理、分析、统计等业务。</li>
<li>Common: 一组分布式文件系统和通用I/O的组建(序列化、java RPC和持久化数据结构)</li>
<li>Pig: 一种数据流语言和运行环境，用以检索非常大的数据集。pig运行在MapRedyce和HdFS集群上。</li>
<li>HBase： 一个分布式、按列存储数据库。Hbase使用HDFS作为底层储存，同时支持MapReduce的批量式计算和点查询（随机读取）。</li>
<li>ZooKeeper：一个分布式、可用性高的协调服务。ZooKeeper提供分布式锁之类的基本服务，用于构建分布式应用。</li>
<li>sqoop： 在数据库和HDFS之间高校传输数据的工具。</li>
</ol>
<p>hadoop的优势：</p>
<ol>
<li>高扩展</li>
<li>低成本</li>
<li>成熟的生态圈</li>
</ol>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a href="https://www.iwwenbo.com/hadoop-installation-on-windows-without-cygwin/" target="_blank" rel="noopener">在windows平台下安装hadoop</a></li>
<li><a href="http://blog.csdn.net/wen3011/article/details/54907731" target="_blank" rel="noopener">安装环境JAVA_HOME is incorrectly set问题解决</a></li>
<li><a href="http://www.voidcn.com/article/p-gdpjxbxw-bz.html" target="_blank" rel="noopener">windows下hadoop本地开发环境的搭建</a></li>
<li><a href="http://www.linuxidc.com/Linux/2016-08/134131p2.htm" target="_blank" rel="noopener">可以会用到的环境搭建资料</a></li>
<li><a href="http://www.imooc.com/video/7642" target="_blank" rel="noopener">imooc上的hadoop视屏学习资料</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/10/12/%E4%BD%BF%E7%94%A8retrofit%E6%9F%A5%E8%AF%A2elasticsearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/12/%E4%BD%BF%E7%94%A8retrofit%E6%9F%A5%E8%AF%A2elasticsearch/" class="post-title-link" itemprop="url">android端对elasticsearch进行增、删、改、查</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-10-12 16:33:08" itemprop="dateCreated datePublished" datetime="2017-10-12T16:33:08+08:00">2017-10-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2017-10-19 20:18:32" itemprop="dateModified" datetime="2017-10-19T20:18:32+08:00">2017-10-19</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>Retrofit与okhttp共同出自于Square公司，retrofit就是对okhttp做了一层封装。把网络请求都交给给了Okhttp，我们只需要通过简单的配置就能使用retrofit来进行网络请求了，其主要作者是Android大神JakeWharton。</p>
</blockquote>
<p>我们上篇学习了如何通过poastMan来模拟http请求来学习elasticsearch的基本请求操作。接下来记录的是如何代码来对我们之前配置好的elasticsearch服务器进行增删改查的基本操作。为了简单起见，我们使用的是开源库<code>retrofit</code>来实现android断的网络通信。</p>
<h1 id="保证可访问"><a href="#保证可访问" class="headerlink" title="保证可访问"></a>保证可访问</h1><p>在正式编写代码之前，我们需要做的一件非常重要的事情就是，确保我们的手机能正确访问到elasticsearch服务器，为了简单起见，我们就实现在同一个局域网之间能正常访问即可。至于如果将elasticsearch如果通过外网访问，这里我就不做介绍了。在确保我们手机与电脑在同一个局域网之后，我们需要做的事情就很简单了，用手机浏览器访问<code>http://you ip:9200</code>,如果浏览器显示如下提示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">name: &quot;msater&quot;,</span><br><span class="line">cluster_name: &quot;reoger&quot;,</span><br><span class="line">cluster_uuid: &quot;D8qVJjX5SCSh62mz9ei3og&quot;,</span><br><span class="line">version: &#123;</span><br><span class="line">number: &quot;5.6.1&quot;,</span><br><span class="line">build_hash: &quot;667b497&quot;,</span><br><span class="line">build_date: &quot;2017-09-14T19:22:05.189Z&quot;,</span><br><span class="line">build_snapshot: false,</span><br><span class="line">lucene_version: &quot;6.6.1&quot;</span><br><span class="line">&#125;,</span><br><span class="line">tagline: &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>则说明我们的手机已经可以正常访问到eslasticsearch服务器了，这个时候我们就可以进行android端的代码编写了。如果手机浏览器提示我们无法访问，可能是我们的eslasticsearch并并没有绑定我们指定的ip地址，具体做法就是到我们eslasticseach/config/elasticsearch.yml中，修改<code>network.host:</code>的值（如果没有就创建）为我们要访问的ip地址即可。如图：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E9%85%8D%E7%BD%AEip%E5%9C%B0%E5%9D%80.png" alt="配置IP地址"></p>
<h1 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h1><p>下面的代码开始就是直接通过retrofit来进行网络请求，如果这个开源库不是很熟悉的话，可以先通过<a href="">这里</a>了解<code>retroift</code>的基本操作。因为例子比较简单，也可以通过本示例对<code>retrofit</code>做一个简单的了解。<br>通过我们手机浏览器的测试我们知道，我们只需要用代码实现访问之前测试通过的地址就可以陈宫访问，接下来我们就通过<code>Retrofit</code>来实现对Elasticsearch的访问测试。<br>代码很简单，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient client&#x3D;new OkHttpClient();</span><br><span class="line">        Request request &#x3D; new Request.Builder().url(&quot;http:&#x2F;&#x2F;you Ip:9200&#x2F;&quot;).build();</span><br><span class="line">       client.newCall(request).enqueue(new okhttp3.Callback() &#123;</span><br><span class="line">           @Override</span><br><span class="line">           public void onFailure(okhttp3.Call call, IOException e) &#123;</span><br><span class="line">               Log.d(&quot;TAG&quot;,e.toString());</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           @Override</span><br><span class="line">           public void onResponse(okhttp3.Call call, okhttp3.Response response) throws IOException &#123;</span><br><span class="line">               if(response!&#x3D;null)</span><br><span class="line">                Log.d(&quot;TAG&quot;,response.body().string());</span><br><span class="line">               else</span><br><span class="line">                   Log.d(&quot;TAG&quot;,&quot;没有返回任何的数据&quot;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>
<p>观察到，当我们运行上面的代码的时候，会打印出我们用浏览器访问的相同的输出。代表着我们的访问测试成功通过。上面ip地址需要修改成你真正的访问ip地址，本例主要通过okhttp来实现网络请求，<code>retrofit</code>是对<code>okhttp</code>进一步的封装，但是这里我们用okhttp反而更加清晰，简单。</p>
<h1 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h1><p>在我们前面的介绍中，我们已经知道如何通过postman这一工具来创建索引，其实就是通过<code>put</code>请求来访问<code>http://you ip/你要创建的索引名称</code>，然后通过上传json信息来确定索引的详细信息，示例的json代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;settings&quot;:&#123;</span><br><span class="line">		&quot;number_of_shards&quot;:3,</span><br><span class="line">		&quot;number_of_replicas&quot;:1</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;mappings&quot;:&#123;</span><br><span class="line">		&quot;man&quot;:&#123;</span><br><span class="line">			&quot;properties&quot;:&#123;</span><br><span class="line">				&quot;name&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;text&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;country&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;keyword&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;age&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;integer&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;data&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;date&quot;,</span><br><span class="line">					&quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss||yyy-MM-dd||epoch_millis&quot;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;woman&quot;:&#123;</span><br><span class="line">			&quot;properties&quot;:&#123;</span><br><span class="line">				&quot;name&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;text&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;country&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;keyword&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;age&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;integer&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;data&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;date&quot;,</span><br><span class="line">					&quot;format&quot;:&quot;yyyy-MM-dd HH:mm:ss||yyy-MM-dd||epoch_millis&quot;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面我们来在android中创建上述的索引。整体来说，代码还是很简单，我们先看实现代码，然后进行简要的说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">String sry &#x3D;&quot;&#123; \&quot;settings\&quot;: &#123; \&quot;number_of_shards\&quot;: 3, \&quot;number_of_replicas\&quot;: 1 &#125;, \&quot;mappings\&quot;: &#123; \&quot;man\&quot;: &#123; \&quot;properties\&quot;: &#123; \&quot;name\&quot;: &#123; \&quot;type\&quot;: \&quot;text\&quot; &#125;, \&quot;country\&quot;: &#123; \&quot;type\&quot;: \&quot;keyword\&quot; &#125;, \&quot;age\&quot;: &#123; \&quot;type\&quot;: \&quot;integer\&quot; &#125;, \&quot;data\&quot;: &#123; \&quot;type\&quot;: \&quot;date\&quot;, \&quot;format\&quot;: \&quot;yyyy-MM-dd HH:mm:ss||yyy-MM-dd||epoch_millis\&quot; &#125; &#125; &#125;, \&quot;woman\&quot;: &#123; \&quot;properties\&quot;: &#123; \&quot;name\&quot;: &#123; \&quot;type\&quot;: \&quot;text\&quot; &#125;, \&quot;country\&quot;: &#123; \&quot;type\&quot;: \&quot;keyword\&quot; &#125;, \&quot;age\&quot;: &#123; \&quot;type\&quot;: \&quot;integer\&quot; &#125;, \&quot;data\&quot;: &#123; \&quot;type\&quot;: \&quot;date\&quot;, \&quot;format\&quot;: \&quot;yyyy-MM-dd HH:mm:ss||yyy-MM-dd||epoch_millis\&quot; &#125; &#125; &#125; &#125; &#125;&quot;;</span><br><span class="line"></span><br><span class="line">      RequestBody body &#x3D; RequestBody.create(okhttp3.MediaType.parse(&quot;application&#x2F;json; charset&#x3D;utf-8&quot;),sry);</span><br><span class="line">      final Request request &#x3D; new Request.Builder()</span><br><span class="line">              .url(&quot;http:&#x2F;&#x2F;192.168.139.1:9200&#x2F;test&quot;)</span><br><span class="line">              .put(body)</span><br><span class="line">              .build();</span><br><span class="line">      OkHttpClient client&#x3D;new OkHttpClient();</span><br><span class="line">      client.newCall(request).enqueue(new okhttp3.Callback() &#123;</span><br><span class="line">          @Override</span><br><span class="line">          public void onFailure(okhttp3.Call call, IOException e) &#123;</span><br><span class="line">              Log.d(&quot;TAG&quot;, &quot;onFailure: &quot;+e);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          @Override</span><br><span class="line">          public void onResponse(okhttp3.Call call, okhttp3.Response response) throws IOException &#123;</span><br><span class="line">              if(response!&#x3D;null)</span><br><span class="line">                  Log.d(&quot;TAG&quot;,response.body().string());</span><br><span class="line">              else</span><br><span class="line">                  Log.d(&quot;TAG&quot;,&quot;没有返回任何的数据&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>
<p>运行上面的代码就能可以在android端创建一个索引，其实我们的代码也比较简单，就是将我们要上传的json数据当作boby一同提交给服务端就OK了。当然，这里我们的json数据是固定的，但是就对于创建索引来说，固定的json数据也能应该大部分情况了，但是添加数据就不能用固定的json数据，那么我们就不能采用这种简单粗暴的方法了，下面将会介绍如果上传动态json数据。</p>
<h1 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h1><p>前面文章中已经介绍过如果在postman中添加数据，那么我们现在通过自己编写代码来实现在android中向elsactisearch中添加数据，请求方式是一样的，因为实现起来非常简单，我们只介绍不指定文档ID插入。前面我们介绍到指定文档ID添加数据需要使用<code>put</code>请求方式，并且需要请求地址中表明ID，而不指定文档ID添加数据则需要用<code>post</code>请求方式，并且不需要再请求地址中表明ID。我们这里就实现用不指定文档ID插入。</p>
<p>通过前面的常见索引，相信大家应该知道如果将json数据上传到服务器，我们这里注重讲的书如何将上传动态json数据。<br>创建动态json数据，我们需要准备json格式对应的bean对象，这里我们采用<code>gsonFormat</code>插件来生成bean对象，例如我们要上传的json数据如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;name&quot;: &quot;张三&quot;,</span><br><span class="line">	&quot;country&quot;: &quot;Englis&quot;,</span><br><span class="line">	&quot;age&quot;: 18,</span><br><span class="line">	&quot;date&quot;: &quot;1999-03-07&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，这里上传的数据要与前面我们创建索引数据格式对应起来，否则不能成功添加。我们将该json对象的bean对象命名为<code>AddData</code>，源码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">public class AddData &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private String country;</span><br><span class="line">    private int age;</span><br><span class="line">    private String date;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getCountry() &#123;</span><br><span class="line">        return country;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCountry(String country) &#123;</span><br><span class="line">        this.country &#x3D; country;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getDate() &#123;</span><br><span class="line">        return date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDate(String date) &#123;</span><br><span class="line">        this.date &#x3D; date;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建上述的bean对象后，我们就可以通过代码来动态的修改json数据，主要的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">AddData addData &#x3D; new AddData();</span><br><span class="line">       addData.setAge(23);</span><br><span class="line">       addData.setCountry(&quot;China&quot;);</span><br><span class="line">       addData.setDate(&quot;2017-09-19&quot;);</span><br><span class="line">       addData.setName(&quot;DongMingZhu&quot;);&#x2F;&#x2F;动态设置json数据</span><br><span class="line"></span><br><span class="line">       Gson gson &#x3D; new Gson();</span><br><span class="line">       String dyJson &#x3D; gson.toJson(addData);</span><br><span class="line">       RequestBody body &#x3D; RequestBody.create(okhttp3.MediaType.parse(&quot;application&#x2F;json; charset&#x3D;utf-8&quot;),dyJson);</span><br><span class="line">       final Request request &#x3D; new Request.Builder()</span><br><span class="line">               .url(&quot;http:&#x2F;&#x2F;192.168.139.1:9200&#x2F;test&#x2F;woman&quot;)</span><br><span class="line">               .post(body)</span><br><span class="line">               .build();</span><br><span class="line">       OkHttpClient client&#x3D;new OkHttpClient();</span><br><span class="line">       client.newCall(request).enqueue(new okhttp3.Callback() &#123;</span><br><span class="line">           @Override</span><br><span class="line">           public void onFailure(okhttp3.Call call, IOException e) &#123;</span><br><span class="line">               Log.d(&quot;TAG&quot;, &quot;onFailure: &quot;+e);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           @Override</span><br><span class="line">           public void onResponse(okhttp3.Call call, okhttp3.Response response) throws IOException &#123;</span><br><span class="line">               if(response!&#x3D;null)</span><br><span class="line">                   Log.d(&quot;TAG&quot;,response.body().string());</span><br><span class="line">               else</span><br><span class="line">                   Log.d(&quot;TAG&quot;,&quot;没有返回任何的数据&quot;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>
<p>运行上述的代码后，发现我们的json数据已经成功上传到服务端。简单吧<del>~</del></p>
<h1 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h1><p>删除操作就是用通过DELETE访问即可，要删除指定文档，我们通过DELETE访问到指定的文档ID即可，例如我想删除test索引中man类中的id为1的文档，我的访问链接可能就是<code>http://127.0.0.1/9100/test/man/1</code> ，如果我们想要直接删除test索引，我们可以通过delete方法访问<code>http://127.0.0.1/9100/test</code>，删除操作很简单，但是我们却要很慎重的对待他，因为我们一旦删除就无法找回。在做删除操作之前最好确保数据备份。因为实现起来很简单，仅贴出删除指定数据的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient client&#x3D;new OkHttpClient();</span><br><span class="line">     Request request &#x3D; new Request.Builder().url(&quot;http:&#x2F;&#x2F;127.0.0.1&#x2F;9100&#x2F;test&#x2F;man&#x2F;1&quot;).delete().build();</span><br><span class="line">    client.newCall(request).enqueue(new okhttp3.Callback() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onFailure(okhttp3.Call call, IOException e) &#123;</span><br><span class="line">            Log.d(&quot;TAG&quot;,e.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onResponse(okhttp3.Call call, okhttp3.Response response) throws IOException &#123;</span><br><span class="line">            if(response!&#x3D;null)</span><br><span class="line">             Log.d(&quot;TAG&quot;,response.body().string());</span><br><span class="line">            else</span><br><span class="line">                Log.d(&quot;TAG&quot;,&quot;没有返回任何的数据&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>


<h1 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h1><h1 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://reoger.tk/2017/09/27/elasticsearch%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="reoger">
      <meta itemprop="description" content="reoger">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="reoger的记录">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/27/elasticsearch%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">elasticsearch入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-09-27 20:48:46" itemprop="dateCreated datePublished" datetime="2017-09-27T20:48:46+08:00">2017-09-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2017-10-14 19:49:42" itemprop="dateModified" datetime="2017-10-14T19:49:42+08:00">2017-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">后端学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Elasticsearch-是什么"><a href="#Elasticsearch-是什么" class="headerlink" title="Elasticsearch 是什么"></a>Elasticsearch 是什么</h1><p>Elasticsearch是一个基于<a href="https://lucene.apache.org/core/" target="_blank" rel="noopener">Apache Lucene(TM)</a>的开源搜索引擎。无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。<br>但是，Lucene只是一个库。想要使用它，你必须使用Java来作为开发语言并将其直接集成到你的应用中，更糟糕的是，Lucene非常复杂，你需要深入了解检索的相关知识来理解它是如何工作的。<br>Elasticsearch也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。<br>不过，Elasticsearch不仅仅是Lucene和全文搜索，我们还能这样去描述它：<br>分布式的实时文件存储，每个字段都被索引并可被搜索<br>分布式的实时分析搜索引擎<br>可以扩展到上百台服务器，处理PB级结构化或非结构化数据<br>而且，所有的这些功能被集成到一个服务里面，你的应用可以通过简单的RESTful API、各种语言的客户端甚至命令行与之交互。<br>上手Elasticsearch非常容易。它提供了许多合理的缺省值，并对初学者隐藏了复杂的搜索引擎理论。它开箱即用（安装即可使用），只需很少的学习既可在生产环境中使用。<br>Elasticsearch在Apache 2 license下许可使用，可以免费下载、使用和修改。<br>随着你对Elasticsearch的理解加深，你可以根据不同的问题领域定制Elasticsearch的高级特性，这一切都是可配置的，并且配置非常灵活。</p>
<h1 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h1><p>因为本人电脑是win10的系统，所以针对elasticsearch所有的操作与环境都是在win10环境下完成，至于其他系统环境，这里不予讨论。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>安装什么的最简单了，首先肯定要将elasticsearch下载到本地，要下载请戳<a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="noopener">这里</a>，下载完成后，直接解析即可开始我们的探究之旅。关于版本，这里需要做一点说明的是，elasticsearch总共有三个大版本，即1XX、2XX和5XX三个，我们这里使用的是最新的版本<code>5.6.1</code>进行学习<br>解压完成后，我们进入<code>bin</code>目录下，点击<code>elasticsearch.bat</code>即可运行。在成功运行后，我们通过浏览器访问<a href="http://localhost:9200/" target="_blank" rel="noopener">http://localhost:9200/</a>得到json格式的数据，即说明我们的elasicsearch成功安装并运行了。如果你在这里失败了，可能因素很多，有可能是你电脑里的java环境问题（没有java环境、java版本低于8等等），也有可能是你的电脑内存啥的太小了（一般不会出现在自己的电脑上，不过我将他部署在腾讯云上时跑不起来就是因为内存太小了）。失败的解决方案就不多介绍了，我们继续往下走。</p>
<h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>通过前面我们的测试安装，我们发现elasticsearch给我们返回的是json格式的数据，并不是很直观，这里我们通过安装一个叫做<code>elasticsearch-head-master</code>的插件，使得我们能更加直观的看到elasticsearch给我们返回的数据。<br>这个插件的github地址在<a href="https://github.com/zt1115798334/elasticsearch-head-master" target="_blank" rel="noopener">这里</a><br>，我们可以通过他的github地址来学习如何安装和使用。</p>
<ol>
<li>首先肯定是将这个插件下载下来，在github下载资料对你来说应该是很简单了，这里就不赘述了，例如我们可以这样下载：<code>git clone git://github.com/mobz/elasticsearch-head.git</code></li>
<li>进入下载并解压好的源代码的目录。</li>
<li>输入 <code>npm install</code>，安装必要的资源。</li>
<li>通过<code>npm run start</code>来启动插件</li>
<li>在浏览器中打开<a href="http://localhost:9100/" target="_blank" rel="noopener">http://localhost:9100/</a>来测试是否正常打开。<br>能正常打开之后，这里时候我们发现elasticsearch和我们head并没有联系到一起，这里因为这两个都运行在独立的进程中，他们之间的访问存在跨域问题，这里时候我们需要进行一个简单的配置才能将这个插件真正运行起来。首先我们需要在<code>elasticsearch</code>目录下，找到<code>config</code>目录，然后再<code>config</code>中找到<code>elasticsearch.yml</code>文件，在这里文件的最后，添加下面的两行代码：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http.cors.enabled: true</span><br><span class="line">http.cors.allow-origin: &quot;*&quot;</span><br></pre></td></tr></table></figure>
保存，退出后，将elasticsearch和head-master都重启后，重新访问<a href="http://localhost:9100/" target="_blank" rel="noopener">http://localhost:9100/</a>就会发现，此时我们的集群已经链接。这里时候我们就可以继续探索了。</li>
</ol>
<h2 id="分布式安装"><a href="#分布式安装" class="headerlink" title="分布式安装"></a>分布式安装</h2><p>上面的我们的安装属于单利安装，elasticsearch也支持分布式安装。下面介绍一下分布式安装。首先，我们制定一个msater，即为集群的指挥官。还是在之前的节点配置文件下，修改<code>elasticsearch.yml</code>文件中的内容，主要就是在末尾添加如下的配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cluster.name: reoger    # 指定集群的名字</span><br><span class="line">node.name: msater       # 对master取名</span><br><span class="line">node.master: true       #指定他为master</span><br><span class="line">network.host: 127.0.0.1 # 绑定ip</span><br></pre></td></tr></table></figure>
<p>修改上面的配置重启后，我们再次访问<a href="http://localhost:9100/" target="_blank" rel="noopener">http://localhost:9100/</a>就可以发现集群的名字已经修改为我们配置的名字。<br>然后，我们再来添加其他的集群。步骤也很简单，我们将之前下载好的<code>elasticsearch</code>复制一份，然后修改其中的<code>elasticsearch.yml</code>文件，添加如下的配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cluster.name: reoger                            # 指定集群名气，需要和master指定的一致</span><br><span class="line">node.name: slave1                               # 指定服务节点的名字</span><br><span class="line"></span><br><span class="line">network.host: 127.0.0.1                         # 指定本地ip</span><br><span class="line">http.port: 8200                                 # 指定端口号</span><br><span class="line"></span><br><span class="line">discovery.zen.ping.unicast.hosts: [&quot;127.0.0.1&quot;] # 发现msater的</span><br></pre></td></tr></table></figure>
<p>然后通过<code>./bin/elasticsearch</code>启动后，通过浏览<a href="http://localhost:9100/" target="_blank" rel="noopener">http://localhost:9100/</a>，就会发现我们已经添加了两个集群了。如图：<br><img src="http://ovec6nnof.bkt.clouddn.com/2017-09-28_133458.jpg" alt="分布式安装效果图"></p>
<h2 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h2><p>在创建索引之前，很有必要对elasticsearch中的基本概念进行一个简单的了解。<br>一句话理解就是：Elasticsearch集群可以包含多个<strong>索引</strong>(indices)（数据库），每一个索引可以包含多个<strong>类型</strong>(types)（表），每一个类型包含多个<strong>文档</strong>(documents)（行），然后每个文档包含多个<strong>字段</strong>(Fields)（列）。</p>
<p>下面我们就来创建索引：<br><strong>结构化创建</strong><br>方法一、通过head-master创建<br>为了使创建索引比较直观，我们可以直接通过head-master插件来完成，具体我们可以访问<a href="http://localhost:9100/" target="_blank" rel="noopener">http://localhost:9100/</a>,查看我们集群的状况，然后选择索引 -&gt; 新建索引，如图所示：</p>
<p>稍等片刻之后就会提示我们索引创建成功，然后在集群概览中就可以看到我们之前添加的索引。<br>然后选择复合查询，在查询创建我们的索引。json示例代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;novel&quot;: &#123;</span><br><span class="line">    &quot;properties&quot;: &#123;</span><br><span class="line">      &quot;title&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;text&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如图：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95.jpg" alt="利用head-master常见索引"> </p>
<p>验证我们是否添加成功，可以在``概览 -&gt; 信息 -&gt; 索引信息 。<br>如图：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA.jpg" alt="效果展示"><br>我们可以明显的看出来，我们已经在mapppings中添加了novel这么一个索引。</p>
<p>当然，通过head-master编写不是很直观，我们可以通过更加方便的工具postMan来实现上述功能。<br>示例操作：<br>我们需要通过<code>put</code>请求<code>127.0.0.1:9200/people</code>其中的people是我们要创建的索引，然后通过我们上传的json文件对创建的索引进行说明。<br>例如上传的的json代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;settings&quot;:&#123;</span><br><span class="line">		&quot;number_of_shards&quot;:3,</span><br><span class="line">		&quot;number_of_replicas&quot;:1</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;mappings&quot;:&#123;</span><br><span class="line">		&quot;man&quot;:&#123;</span><br><span class="line">			&quot;properties&quot;:&#123;</span><br><span class="line">				&quot;name&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;text&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;country&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;keyword&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;age&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;integer&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">				&quot;data&quot;:&#123;</span><br><span class="line">					&quot;type&quot;:&quot;date&quot;,</span><br><span class="line">					&quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss||yyy-MM-dd||epoch_millis&quot;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;woman&quot;:&#123;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>表示的是常见的people<br>验证方法和之前的一样。</p>
<p><strong>非结构化创建</strong></p>
<h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><h3 id="指定文档ID插入"><a href="#指定文档ID插入" class="headerlink" title="指定文档ID插入"></a>指定文档ID插入</h3><p>我们这里仅用postman做示例：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E6%8C%87%E5%AE%9A%E6%96%87%E6%A1%A3ID%E6%8F%92%E5%85%A5.jpg" alt="指定文档ID插入"></p>
<h3 id="不指定文档ID插入"><a href="#不指定文档ID插入" class="headerlink" title="不指定文档ID插入"></a>不指定文档ID插入</h3><p><img src="http://ovec6nnof.bkt.clouddn.com/%E4%B8%8D%E6%8C%87%E5%AE%9AID%E6%8F%92%E5%85%A5.jpg" alt="不指定文档插入"><br>可以看到，指定文档ID插入我们需要使用put请求方式，并且需要指定文档ID。而不指定文档ID插入则使用post请求方式，并且不需要知道哪个文档ID。</p>
<p>验证是否添加成功，在数据浏览中就可以看到我们插入的数据：<br><img src="http://ovec6nnof.bkt.clouddn.com/%E9%AA%8C%E8%AF%81%E6%8F%92%E5%85%A5%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F.jpg" alt="验证文档是否添加成功"></p>
<h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><p>修改数据很简单，</p>
<h3 id="直接修改文档"><a href="#直接修改文档" class="headerlink" title="直接修改文档"></a>直接修改文档</h3><p><img src="http://ovec6nnof.bkt.clouddn.com/%E4%BF%AE%E6%94%B9%E6%96%87%E6%A1%A3.jpg" alt="直接修改文档"></p>
<h3 id="脚本修改文档"><a href="#脚本修改文档" class="headerlink" title="脚本修改文档"></a>脚本修改文档</h3><p>保持要访问的地址和方式不变，将上传的json格式修改为下面的内容，即修改为script的关键字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;script&quot;:&#123;</span><br><span class="line">		&quot;lang&quot;:&quot;painless&quot;,</span><br><span class="line">		&quot;inline&quot;:&quot;ctx._source.age+&#x3D;10&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者我们也可以这么写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;script&quot;:&#123;</span><br><span class="line">		&quot;lang&quot;:&quot;painless&quot;,</span><br><span class="line">		&quot;inline&quot;:&quot;ctx._source.age&#x3D;params.age&quot;,</span><br><span class="line">		&quot;params&quot;:&#123;</span><br><span class="line">			&quot;age&quot;:100</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><h3 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h3><p>删除文档很简单，只需要简单的通过DELETE方式访问制定ID文档即可删除。<br>例如我们想删除man索引中文档ID为1的文档，我们通过DELETE方式访问即可。<br><code>127.0.0.1:9200/people/man/1</code></p>
<h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><p>删除索引非常危险，因为删除索引后，索引里面所有的内容都将被删除！！！如果我们确定我们需要删除的话，可以通过head-master来实现。<br>具体可以选择相应的索引 -&gt; 动作 -&gt; 删除索引 -&gt; 输入删除 -&gt; 成功删除。</p>
<p>或者我们直接通过delete进行访问，例如想要删除people这个索引，我们只需要通过delete方式访问<code>127.0.0.1:9200/people/</code>即可删除。</p>
<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><h3 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h3><p>直接通过文档进行查询，请求方式：GET<br>例如我想查询在people索引中，类型为man，文档ID为1的文档信息的话，直接访问：<br><code>127.0.0.1:9200/people/man/1</code>即可。</p>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><p>大多数情况下，简单查询不能满足我们的需求，这个时候我们就可以通过条件查询来满足我们复杂的需求。<br>如果我们需要查询people索引下所有的文档，可以通过<strong>post方法</strong>访问<code>127.0.0.1:9200/people/_search</code>，并将body的内容设置为如下的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;query&quot;:&#123;</span><br><span class="line">		&quot;match_all&quot;:&#123;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，大多数情况我们是需要按条件查询，下面是按条件查询的示例json请求格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;query&quot;:&#123;                         &#x2F;&#x2F;注意 这里是query关键字</span><br><span class="line">		&quot;match&quot;:&#123;                     &#x2F;&#x2F;要查询的的条件</span><br><span class="line">			&quot;country&quot;:&quot;Test&quot;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;sort&quot;:[                            &#x2F;&#x2F;查询结果后的排序</span><br><span class="line">		&#123;&quot;date&quot;: &#123;&quot;order&quot;:&quot;desc&quot;&#125;&#125;      &#x2F;&#x2F; 倒叙排序</span><br><span class="line">		]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="聚合查询"><a href="#聚合查询" class="headerlink" title="聚合查询"></a>聚合查询</h3><p>聚合查询，简单来说就是将要查询的数据组合到一起，进而汇总来自多行的信息。<br>例如，我想查询people中，年龄相同的聚合信息，查询的方式仍然是post，访问的地址仍然是<code>127.0.0.1:9200/people/_search</code>，不同的发送的json数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;aggs&quot;:&#123;					&#x2F;&#x2F;关键字</span><br><span class="line">		&quot;group_by_word_age&quot;:&#123;  	&#x2F;&#x2F;自定义聚合的名字</span><br><span class="line">			&quot;terms&quot;:&#123;			&#x2F;&#x2F;关键字</span><br><span class="line">				&quot;field&quot;: &quot;age&quot;	&#x2F;&#x2F;聚合的字段名称</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;group_by_data&quot;:&#123;		&#x2F;&#x2F;自定义聚合的名字</span><br><span class="line">			&quot;terms&quot;:&#123;			&#x2F;&#x2F;关键字</span><br><span class="line">				&quot;field&quot;: &quot;date&quot; &#x2F;&#x2F;聚合字段的名称</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我这里返回的信息为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">....,</span><br><span class="line">    &quot;aggregations&quot;: &#123;</span><br><span class="line">        &quot;group_by_data&quot;: &#123;</span><br><span class="line">            &quot;doc_count_error_upper_bound&quot;: 0,</span><br><span class="line">            &quot;sum_other_doc_count&quot;: 0,</span><br><span class="line">            &quot;buckets&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;: 923443200000,</span><br><span class="line">                    &quot;key_as_string&quot;: &quot;1999-04-07T00:00:00.000Z&quot;,</span><br><span class="line">                    &quot;doc_count&quot;: 2</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;: -1916697600000,</span><br><span class="line">                    &quot;key_as_string&quot;: &quot;1909-04-07T00:00:00.000Z&quot;,</span><br><span class="line">                    &quot;doc_count&quot;: 1</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;group_by_word_age&quot;: &#123;</span><br><span class="line">            &quot;doc_count_error_upper_bound&quot;: 0,</span><br><span class="line">            &quot;sum_other_doc_count&quot;: 0,</span><br><span class="line">            &quot;buckets&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;: 28,</span><br><span class="line">                    &quot;doc_count&quot;: 3</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，我们不但可以通过<code>terms</code>查询字段的聚合信息，还可以通过<code>status</code>、<code>min</code>、<code>max</code>等关键字查询字段的状态信息。</p>
<p>最后，补充一点就是，如果想通过ip地址访问的话，需要修改<code>elasticsearch.yml</code>文件中的<code>network.host:</code>为我们指定的Ip字段。<br>暂时先写这么吧<del>~</del></p>
<hr>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a href="https://es.xiaoleilu.com/" target="_blank" rel="noopener">Elasticsearch权威指南（中文版）</a></li>
<li><a href="https://www.elastic.co/cn/" target="_blank" rel="noopener">elasticsearch官方网站</a></li>
<li><a href="http://www.imooc.com/video/15762" target="_blank" rel="noopener">慕课网上的教学视频</a></li>
<li><a href="http://www.sojson.com/tag_elasticsearch_3.html" target="_blank" rel="noopener">soJson博客</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">reoger</p>
  <div class="site-description" itemprop="description">reoger</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">reoger</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
